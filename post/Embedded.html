<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Embedded | Zgh&#39;s</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="为什么原理图里的stm32f4的VCAP1引脚要接一个4.7微法的电容，再接地呢 2023&#x2F;12&#x2F;25 08:23:32 STM32F4芯片的VCAP1引脚是芯片内部电容的引出端，用于连接外部电容以提供给芯片内部振荡电路使用。在使用高速外设时，由于这些外设需要非常稳定的电源供应，因此需要在VCAP1引脚与地之间连接一个电容来提高芯片的稳定性。 具体来说，连接4.7微法的电容可以">
<meta property="og:type" content="article">
<meta property="og:title" content="Embedded">
<meta property="og:url" content="http://zgh20060114.github.io/post/Embedded.html">
<meta property="og:site_name" content="Zgh&#39;s">
<meta property="og:description" content="为什么原理图里的stm32f4的VCAP1引脚要接一个4.7微法的电容，再接地呢 2023&#x2F;12&#x2F;25 08:23:32 STM32F4芯片的VCAP1引脚是芯片内部电容的引出端，用于连接外部电容以提供给芯片内部振荡电路使用。在使用高速外设时，由于这些外设需要非常稳定的电源供应，因此需要在VCAP1引脚与地之间连接一个电容来提高芯片的稳定性。 具体来说，连接4.7微法的电容可以">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://zgh20060114.github.io/images/v2-85bf2c8a1398bd5c9772b759d44c6725_r.jpg">
<meta property="og:image" content="http://zgh20060114.github.io/images/image-20231228133639969.png">
<meta property="og:image" content="http://zgh20060114.github.io/images/image-20231228133811569.png">
<meta property="og:image" content="http://zgh20060114.github.io/images/image-20231228134014238.png">
<meta property="og:image" content="http://zgh20060114.github.io/images/image-20231228134605423.png">
<meta property="og:image" content="http://zgh20060114.github.io/images/image-20231228134230069.png">
<meta property="og:image" content="http://zgh20060114.github.io/images/image-20231228134310310.png">
<meta property="og:image" content="http://zgh20060114.github.io/images/image-20231228142350256.png">
<meta property="og:image" content="http://zgh20060114.github.io/images/image-20231228142627629.png">
<meta property="og:image" content="http://zgh20060114.github.io/images/image-20231228142731948.png">
<meta property="og:image" content="http://zgh20060114.github.io/images/image-20240102113359669.png">
<meta property="og:image" content="http://zgh20060114.github.io/images/image-20240102144257554.png">
<meta property="og:image" content="http://zgh20060114.github.io/images/image-20240103170615099.png">
<meta property="og:image" content="http://zgh20060114.github.io/images/image-20240103191542473.png">
<meta property="og:image" content="http://zgh20060114.github.io/images/image-20240103193207567.png">
<meta property="og:image" content="http://zgh20060114.github.io/images/image-20240322130525454.png">
<meta property="og:image" content="http://zgh20060114.github.io/images/image-20240322130023148.png">
<meta property="og:image" content="http://zgh20060114.github.io/images/image-20240322130246888.png">
<meta property="og:image" content="http://zgh20060114.github.io/images/image-20240322130635769.png">
<meta property="og:image" content="http://zgh20060114.github.io/images/image-20240322195132792.png">
<meta property="og:image" content="http://zgh20060114.github.io/images/image-20240322195540298.png">
<meta property="og:image" content="http://zgh20060114.github.io/images/image-20240322195836292.png">
<meta property="og:image" content="http://zgh20060114.github.io/images/image-20240322200333679.png">
<meta property="og:image" content="http://zgh20060114.github.io/images/image-20240323090001811.png">
<meta property="og:image" content="http://zgh20060114.github.io/images/image-20240324102428755.png">
<meta property="og:image" content="http://zgh20060114.github.io/images/image-20240324102801798.png">
<meta property="og:image" content="http://zgh20060114.github.io/images/image-20240324103200416.png">
<meta property="og:image" content="http://zgh20060114.github.io/images/image-20240324103611561.png">
<meta property="og:image" content="http://zgh20060114.github.io/images/image-20240324103705403.png">
<meta property="og:image" content="http://zgh20060114.github.io/images/image-20240324105850607.png">
<meta property="og:image" content="http://zgh20060114.github.io/images/image-20240324110915173.png">
<meta property="og:image" content="http://zgh20060114.github.io/images/image-20240324115944131.png">
<meta property="og:image" content="http://zgh20060114.github.io/images/image-20240324143451922.png">
<meta property="og:image" content="http://zgh20060114.github.io/images/image-20240324160106485.png">
<meta property="og:image" content="http://zgh20060114.github.io/images/image-20240328093523112.png">
<meta property="og:image" content="http://zgh20060114.github.io/images/image-20240410131546745.png">
<meta property="og:image" content="http://zgh20060114.github.io/images/image-20240410131717234.png">
<meta property="og:image" content="http://zgh20060114.github.io/images/image-20240410141116783.png">
<meta property="og:image" content="http://zgh20060114.github.io/images/image-20240410142357998.png">
<meta property="og:image" content="http://zgh20060114.github.io/images/image-20240410171152068.png">
<meta property="og:image" content="http://zgh20060114.github.io/images/image-20240410171607710.png">
<meta property="og:image" content="http://zgh20060114.github.io/images/image-20240410171723221.png">
<meta property="og:image" content="http://zgh20060114.github.io/images/image-20240410172152947.png">
<meta property="og:image" content="http://zgh20060114.github.io/images/image-20240411090500199.png">
<meta property="og:image" content="http://zgh20060114.github.io/images/image-20240411090745706.png">
<meta property="og:image" content="http://zgh20060114.github.io/images/image-20240411092035829.png">
<meta property="og:image" content="http://zgh20060114.github.io/images/image-20240411092600517.png">
<meta property="og:image" content="http://zgh20060114.github.io/images/image-20240414171100213.png">
<meta property="og:image" content="http://zgh20060114.github.io/images/image-20240414172301612.png">
<meta property="article:published_time" content="2023-12-25T00:29:56.000Z">
<meta property="article:modified_time" content="2024-05-29T09:12:38.471Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="Embedded">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://zgh20060114.github.io/images/v2-85bf2c8a1398bd5c9772b759d44c6725_r.jpg">
  
    <link rel="alternate" href="/atom.xml" title="Zgh's" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Zgh&#39;s</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="Search"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://Zgh20060114.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-Embedded" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/post/Embedded.html" class="article-date">
  <time class="dt-published" datetime="2023-12-25T00:29:56.000Z" itemprop="datePublished">2023-12-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      Embedded
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>为什么原理图里的stm32f4的VCAP1引脚要接一个4.7微法的电容，再接地呢</p>
<p>2023&#x2F;12&#x2F;25 08:23:32</p>
<p>STM32F4芯片的VCAP1引脚是芯片内部电容的引出端，用于连接外部电容以提供给芯片内部振荡电路使用。在使用高速外设时，由于这些外设需要非常稳定的电源供应，因此需要在VCAP1引脚与地之间连接一个电容来提高芯片的稳定性。</p>
<p>具体来说，连接4.7微法的电容可以起到平滑电压、提高电源噪声抑制能力等作用，从而提高芯片的工作稳定性和可靠性。此外，需要注意电容的选型要符合芯片手册的要求，不能超出规定的范围。</p>
<p>2023&#x2F;12&#x2F;25 08:26:15<br>芯片内部还有电容吗</p>
<p>2023&#x2F;12&#x2F;25 08:26:20</p>
<p>是的，芯片内部通常会包含一些电容。这些内部电容主要用于稳定芯片的电源供应和进行滤波。它们的作用包括：</p>
<div class="language-txt"><button title="Copy code" class="copy"></button><span class="lang">txt</span><pre class="shiki material-theme-palenight" style="background-color: #1a1a1a" tabindex="0"><code><span class="line"><span style="color: #babed8">电源滤波：在芯片内部集成了一些小型电容器，用于过滤电源中的噪声和干扰，确保芯片正常运行所需的电源干净和稳定。</span></span>
<span class="line"><span style="color: #babed8"></span></span>
<span class="line"><span style="color: #babed8">芯片电源稳定：芯片内部可能还包含一些供电相关的电容，用于提供瞬态响应和电源稳定性，以确保芯片在各种工作条件下都能正常工作。</span></span></code></pre></div><p>这些内部电容一般由芯片制造商在设计阶段根据具体需求添加，并在芯片手册或参考设计中进行了详细说明。在使用芯片时，我们不需要特别处理这些内部电容，只需按照芯片手册的要求合理连接外部电容即可。</p>
<p>2023&#x2F;12&#x2F;25 08:26:41<br>那为什么还要连接外部电容</p>
<p>2023&#x2F;12&#x2F;25 08:26:48</p>
<p>连接外部电容主要是为了进一步提高芯片的电源稳定性和抑制电磁干扰。虽然芯片内部已经包含了一些电容，但这些电容的容值较小且位置相对固定，可能无法满足某些特殊应用或高要求的电源稳定性。</p>
<p>通过在VCAP1引脚与地之间连接外部电容，可以实现以下效果：</p>
<div class="language-txt"><button title="Copy code" class="copy"></button><span class="lang">txt</span><pre class="shiki material-theme-palenight" style="background-color: #1a1a1a" tabindex="0"><code><span class="line"><span style="color: #babed8">改善电源噪声抑制能力：外部电容可以提供更大的容值，能够更好地滤除电源中的高频噪声和纹波，从而提供更稳定的电源供应。</span></span>
<span class="line"><span style="color: #babed8"></span></span>
<span class="line"><span style="color: #babed8">提供额外的瞬态响应：外部电容能够快速响应芯片工作状态的变化，提供更好的瞬态响应能力，尤其在高速外设工作时，可以提供更稳定的电源给这些外设。</span></span>
<span class="line"><span style="color: #babed8"></span></span>
<span class="line"><span style="color: #babed8">抑制电磁干扰：外部电容能够帮助减少电源线上的电磁辐射和接收到的外界干扰信号，提高系统的抗干扰能力，保证芯片的正常运行。</span></span></code></pre></div><p>需要注意的是，具体的外部电容选型和连接方式应根据芯片厂商提供的参考设计或芯片手册的建议进行，以确保电路的稳定性和可靠性。</p>
<p><img src="/../images/v2-85bf2c8a1398bd5c9772b759d44c6725_r.jpg" alt="img"></p>
<p><img src="/../images/image-20231228133639969.png" alt="image-20231228133639969"></p>
<p><img src="/../images/image-20231228133811569.png" alt="image-20231228133811569">配置通道    具有检测正反插…..等</p>
<p><img src="/../images/image-20231228134014238.png" alt="image-20231228134014238"></p>
<p>边带使用实现…..</p>
<p><img src="/../images/image-20231228134605423.png" alt="image-20231228134605423"></p>
<p><img src="/../images/image-20231228134230069.png" alt="image-20231228134230069"></p>
<p><img src="/../images/image-20231228134310310.png" alt="image-20231228134310310"></p>
<p><img src="/../images/image-20231228142350256.png" alt="image-20231228142350256"></p>
<p><img src="/../images/image-20231228142627629.png" alt="image-20231228142627629"></p>
<p><img src="/../images/image-20231228142731948.png" alt="image-20231228142731948">OSC32IN引脚，用于连接外部低速晶体振荡器（32.768 kHz）。这种振荡器通常用于实时时钟（RTC)的时基。</p>
<p>OSC_IN引脚，用于连接外部高速晶体振荡器（通常在4 MHz到26 MHz之间）。这种振荡器通常用于系统时钟（SYSCLK）的时基。</p>
<p>VBAT代表电池供电引脚（Voltage Battery）。VBAT引脚用于连接外部备用电池，通常是一个小型电池，以提供芯片的备份电源。</p>
<p>VCAP1是指STM32系列芯片上的一个电容滤波器引脚，用于为芯片内部提供稳定的电源环境<br>,用于去除芯片电源中的高频噪声和波动。</p>
<p><img src="/../images/image-20240102113359669.png" alt="image-20240102113359669"></p>
<p><img src="/../images/image-20240102144257554.png" alt="image-20240102144257554">在电路设计中，加入0欧电阻（也称为短接电阻）有以下几个常见的目的：</p>
<ol>
<li>电路连接：0欧电阻可以作为电路的连接点，将不同信号线或电源线连接在一起。它可以提供良好的电气连接，并保持信号或电流的连续性。</li>
<li>信号分配：在复杂的电路板上，使用0欧电阻可以方便地将信号线分配到不同的位置。通过添加或移除0欧电阻，可以改变信号路径，以满足电路的布局要求。</li>
<li>调试和测试：在调试和测试电路时，加入0欧电阻可以方便地连接测试仪器或测量点。它可以用作测试点或测量点的连接线，以便在需要时轻松接入测试设备。</li>
<li>阻抗匹配：在高频电路设计中，0欧电阻可以用于阻抗匹配。通过选择适当的阻值，可以使电路中的阻抗更好地匹配，以最大限度地传输信号或功率。</li>
</ol>
<p>需要注意的是，加入0欧电阻并不会引入电阻本身的阻尼效应。它的主要作用是提供连接和分配功能，而不会对电路的整体电性能产生实质性的影响。</p>
<p><img src="/../images/image-20240103170615099.png" alt="image-20240103170615099"></p>
<p>TPS3823-33DBVR的MR引脚是干什么的</p>
<p>1&#x2F;3&#x2F;2024, 5:11:40 PM</p>
<p>TPS3823-33DBVR是一款超低功耗、微型化的复位监测器。MR引脚是器件的主复位引脚，用于手动地对器件进行复位操作。</p>
<p>当MR引脚被拉低时，TPS3823-33DBVR会立即进行复位操作，并将RST引脚拉低，使被监测的系统或芯片得到重新启动。此外，当MR引脚保持低电平时，TPS3823-33DBVR将始终保持在复位状态，直到MR引脚上升到高电平。</p>
<p>需要注意的是，MR引脚应该在正常工作时保持高电平，并通过一个合适的电阻接到正电源。当需要手动复位时，可以通过连接一个按钮或开关来将MR引脚拉低，从而触发复位操作。</p>
<p>总之，TPS3823-33DBVR的MR引脚是用于手动复位操作的引脚，当MR引脚被拉低时，TPS3823-33DBVR会进行复位操作，从而实现对被监测系统或芯片的重新启动。</p>
<p>1&#x2F;3&#x2F;2024, 5:12:51 PM</p>
<p>TPS3823-33DBVR的WDI引脚是干什么的</p>
<p>1&#x2F;3&#x2F;2024, 5:13:13 PM</p>
<p>TPS3823-33DBVR的WDI引脚是用于喂狗定时器（Watchdog Timer）的输入引脚。</p>
<p>喂狗定时器是一种用于监控系统运行状态的计时器。它需要周期性地接收一个喂狗脉冲来防止系统出现故障或死锁。如果在一定的时间内没有接收到喂狗脉冲，喂狗定时器会触发复位操作，使被监控的系统重新启动。</p>
<p>在TPS3823-33DBVR中，WDI引脚用于接收外部喂狗脉冲。当WDI引脚接收到一个高电平脉冲时，喂狗定时器会被重置，系统继续正常运行。如果在一定时间内未接收到喂狗脉冲，喂狗定时器将超时，并触发复位操作。</p>
<p>通过连接一个外部的喂狗脉冲源（例如微处理器的GPIO引脚），可以周期性地向TPS3823-33DBVR的WDI引脚提供喂狗脉冲。这样可以确保系统持续运行，并在出现故障或死锁时进行自动复位，提高系统的可靠性和稳定性。</p>
<p>总之，TPS3823-33DBVR的WDI引脚用于接收外部喂狗脉冲，用于喂狗定时器的重置操作，以确保系统正常运行并防止故障或死锁。</p>
<p>MPU6050<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_52251819/article/details/134957492">https://blog.csdn.net/qq_52251819/article/details/134957492</a></p>
<p><img src="/../images/image-20240103191542473.png" alt="image-20240103191542473"></p>
<p>AHT21</p>
<p><img src="/../images/image-20240103193207567.png" alt="image-20240103193207567"></p>
<p>Vdd_IO和Vdd是两个不同的电源引脚，常见于集成电路或芯片中。</p>
<ol>
<li>Vdd（也称为Vcc）是供电引脚，用于提供主要的电源电压给芯片或集成电路的内部电路。它通常连接到正电源（例如+3.3V或+5V），以供应芯片内部的数字和模拟电路。</li>
<li>Vdd_IO（也称为Vcc_IO或VddIO）是IO供电引脚，用于提供给输入输出（IO）电路的电源电压。它通常连接到较低的电压（例如+1.8V或+3.3V），用于驱动芯片的输入和输出引脚。</li>
</ol>
<p>区别：</p>
<ul>
<li>功能：Vdd提供整个芯片的电源，包括内部逻辑、处理器核心等。Vdd_IO则专门提供给IO电路使用。</li>
<li>电压级别：Vdd通常连接到较高的电压，而Vdd_IO连接到较低的电压。这是为了在现代集成电路中实现低功耗设计和电压兼容性。</li>
</ul>
<p>在 STM32 HAL 库中，xx_MspInit() 和 xx_Init() 函数是针对特定外设的初始化函数。</p>
<ol>
<li><strong>xx_MspInit() 函数</strong>：该函数是外设的底层初始化函数，用于配置外设的时钟、引脚、中断等底层硬件资源。”xx” 是指特定外设的前缀，例如 GPIO、USART、SPI 等。xx_MspInit() 通常在应用程序初始化之前调用，主要目的是配置外设所需的底层硬件资源。</li>
<li><strong>xx_Init() 函数</strong>：该函数是外设的高层初始化函数，用于配置外设的工作模式、时钟频率、中断优先级等高层参数。它会调用底层的 xx_MspInit() 函数来初始化底层硬件资源，并进行一些高层配置。xx_Init() 通常在应用程序初始化阶段调用，用于配置外设的工作模式和参数。</li>
</ol>
<p>HAL_ADC_ConfigChannel()是ADC常规通道配置，一次配置一个通道</p>
<p>HAL_ADC_PollForConversion()是轮询方式等待ADC常规通道转换完成</p>
<p>HAL_ADC_GetValue()读取常规通道转换结果寄存器的数据</p>
<p>HAL_ADC_Start（）以软件方式启动ADC常规转换的通道，然后调用HAL_ADC_PollForConversion()来查询转换是否完成，如果转换完成，使用HAL_ADC_GetValue()读出常规结果寄存器的32位数据</p>
<p>stm32是32位的，所以指针总是32位的</p>
<p><img src="/../images/image-20240322130525454.png" alt="image-20240322130525454"></p>
<p>![(..&#x2F;images&#x2F;image-20240322125751723.png)<img src="/../images/image-20240322130023148.png" alt="image-20240322130023148"></p>
<p><img src="/../images/image-20240322130246888.png" alt="image-20240322130246888"></p>
<p><img src="/../images/image-20240322130635769.png" alt="image-20240322130635769"><img src="/../images/image-20240322195132792.png" alt="image-20240322195132792"></p>
<p><strong>工作模式：</strong></p>
<p><img src="/../images/image-20240322195540298.png" alt="image-20240322195540298"></p>
<p><strong>低功耗模式：</strong></p>
<p><img src="/../images/image-20240322195836292.png" alt="image-20240322195836292"></p>
<p><img src="/../images/image-20240322200333679.png" alt="image-20240322200333679"><img src="/../images/image-20240323090001811.png" alt="image-20240323090001811"></p>
<p>stm32的SPI的Clock Phase(CPHA)设置为2 Edge是什么意思</p>
<p>2024&#x2F;3&#x2F;23 14:29:32</p>
<p>在 STM32 微控制器的 SPI（Serial Peripheral Interface）模块中，Clock Phase（时钟相位，通常用 CPHA 表示）参数用于定义数据采样的时机。当设置为 2 Edge 时，表示数据采样会在时钟的第二个边缘上进行。</p>
<p>在 SPI 通信中，数据传输的时机是由时钟信号决定的。CPHA 参数定义了数据采样的时机相对于时钟信号的边缘。具体来说，CPHA 可以设置为 0 或 1，分别表示：</p>
<ul>
<li>CPHA &#x3D; 0：数据在时钟信号的第一个边缘上进行采样。也就是说，在时钟信号的上升沿或下降沿（取决于时钟极性）开始时采样数据。</li>
<li>CPHA &#x3D; 1：数据在时钟信号的第二个边缘上进行采样。也就是说，在时钟信号的另一个沿（与上升沿或下降沿相反的沿）上采样数据。</li>
</ul>
<p>因此，当将 SPI 的 CPHA 参数设置为 2 Edge 时，表示数据采样会在时钟的第二个边缘上进行，这种设置通常用于特定的 SPI 设备或者通信协议要求，确保数据的正确采样和传输。在实际应用中，需要根据外设设备的要求和通信协议的规范来选择合适的 CPHA 设置，以确保 SPI 数据传输的准确性和稳定性。</p>
<p><img src="/../images/image-20240324102428755.png" alt="image-20240324102428755"><img src="/../images/image-20240324102801798.png" alt="image-20240324102801798"></p>
<p><img src="/../images/image-20240324103200416.png" alt="image-20240324103200416"><img src="/../images/image-20240324103611561.png" alt="image-20240324103611561"><img src="/../images/image-20240324103705403.png" alt="image-20240324103705403"></p>
<p><strong>不使用预装载，设置的新ARR的值立即生效</strong></p>
<p><strong>使用，会在下一个UEV事件生效</strong></p>
<p><strong>PWM波</strong>：</p>
<p><img src="/../images/image-20240324105850607.png" alt="image-20240324105850607"></p>
<p><img src="/../images/image-20240324110915173.png" alt="image-20240324110915173"><img src="/../images/image-20240324115944131.png" alt="image-20240324115944131"></p>
<div class="language-c"><button title="Copy code" class="copy"></button><span class="lang">c</span><pre class="shiki material-theme-palenight" style="background-color: #1a1a1a" tabindex="0"><code><span class="line"><span style="color: #82AAFF">HAL_TIM_IC_CaptureCallback</span><span style="color: #89DDFF">(</span><span style="color: #BABED8">htim</span><span style="color: #89DDFF">);</span></span>
<span class="line"><span style="color: #82AAFF">HAL_TIM_OC_DelayElapsedCallback</span><span style="color: #89DDFF">(</span><span style="color: #BABED8">htim</span><span style="color: #89DDFF">);</span></span>
<span class="line"><span style="color: #82AAFF">HAL_TIM_PWM_PulseFinishedCallback</span><span style="color: #89DDFF">(</span><span style="color: #BABED8">htim</span><span style="color: #89DDFF">);</span></span>
<span class="line"><span style="color: #82AAFF">HAL_TIM_PeriodElapsedCallback</span><span style="color: #89DDFF">(</span><span style="color: #BABED8">htim</span><span style="color: #89DDFF">);</span></span>
<span class="line"><span style="color: #82AAFF">HAL_TIM_TriggerCallback</span><span style="color: #89DDFF">(</span><span style="color: #BABED8">htim</span><span style="color: #89DDFF">);</span></span>
<span class="line"><span style="color: #82AAFF">HAL_TIMEx_CommutCallback</span><span style="color: #89DDFF">(</span><span style="color: #BABED8">htim</span><span style="color: #89DDFF">);</span></span></code></pre></div><p><img src="/../images/image-20240324143451922.png" alt="image-20240324143451922"><img src="/../images/image-20240324160106485.png" alt="image-20240324160106485"></p>
<p><img src="/../images/image-20240328093523112.png" alt="image-20240328093523112"></p>
<p>mpu_prototypes.h</p>
<p>mpu_wrappers.h内存保护单元 ,内存保护单元(memory protection unit)，简称：MPU,使用MPU可以设置不同存储区域的存储访问特性（如只支持特权访问或全访问）和存储器属性（如可缓存、可共享），从而提高嵌入式系统的健壮性，使系统更加安全。优先执行mpu_prototypes.h,mpu_wrappers.h里的函数</p>
<p><img src="/../images/image-20240410131546745.png" alt="image-20240410131546745"></p>
<p><img src="/../images/image-20240410131717234.png" alt="image-20240410131717234"></p>
<p><img src="/../images/image-20240410141116783.png" alt="image-20240410141116783"></p>
<p><img src="/../images/image-20240410142357998.png" alt="image-20240410142357998"></p>
<p>MPU：内存保护单元</p>
<p>FPU：浮点数单元</p>
<p>钩子函数类似于回调函数</p>
<p><img src="/../images/image-20240410171152068.png" alt="image-20240410171152068"></p>
<p><img src="/../images/image-20240410171607710.png" alt="image-20240410171607710"></p>
<p><img src="/../images/image-20240410171723221.png" alt="image-20240410171723221"></p>
<p>  <img src="/../images/image-20240410172152947.png" alt="image-20240410172152947"></p>
<p><img src="/../images/image-20240411090500199.png" alt="image-20240411090500199"></p>
<p><img src="/../images/image-20240411090745706.png" alt="image-20240411090745706"></p>
<p>freertos中任何时候都要有一个任务占用CPU，所以就有了空闲任务</p>
<p>systick只有定时中断功能，1ms中断一次</p>
<p>systick定时器不仅可以产生滴答信号，还可以产生任务切换申请</p>
<p><img src="/../images/image-20240411092035829.png" alt="image-20240411092035829"></p>
<p><img src="/../images/image-20240411092600517.png" alt="image-20240411092600517"></p>
<p>所以：Freertos的任务优先级总是低于系统中断的优先级</p>
<p><img src="/../images/image-20240414171100213.png" alt="image-20240414171100213"></p>
<p><img src="/../images/image-20240414172301612.png" alt="image-20240414172301612"></p>
<p>xTaskCreate()创建一个任务，以动态方式来分配内存</p>
<p>xTaskCreateStatic()</p>
<p>vTaskDelete()可以删除当前任务或者另一个任务</p>
<p>vTaskSuspend()可以挂起当前任务或者另一个任务</p>
<p>vTaskResume()恢复另一个挂起的任务的运行</p>
<p>调度器管理的函数：<br>vTaskStartScheduler()开启任务调度器</p>
<p>vTaskSuspendAll()挂起任务调度器，但是不禁用中断，调度器被挂起后，不再进行上下文切换</p>
<p>vTaskResumeAll()恢复调度器的执行，但是不会恢复vTaskSuspend()单独挂起的任务</p>
<p>延时和调度的函数：</p>
<p>中央对齐模式下：</p>
<div class="language-txt"><button title="Copy code" class="copy"></button><span class="lang">txt</span><pre class="shiki material-theme-palenight" style="background-color: #1a1a1a" tabindex="0"><code><span class="line"><span style="color: #babed8">RCR = 0，更新事件没有延迟；</span></span>
<span class="line"><span style="color: #babed8">RCR = 1，更新事件延后了半个PWM周期；</span></span>
<span class="line"><span style="color: #babed8">RCR = 2, 更新事件延后了一个PWM周期；</span></span>
<span class="line"><span style="color: #babed8">RCR = 3，更新事件延后了 3 2 \cfrac&#123;3&#125;&#123;2&#125; 23个PWM周期；</span></span></code></pre></div>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://zgh20060114.github.io/post/Embedded.html" data-id="clxbjvuxn000461cxcnid2q3p" data-title="Embedded" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Embedded/" rel="tag">Embedded</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/post/pcl.html" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          pcl
        
      </div>
    </a>
  
  
    <a href="/post/Esp32.html" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Esp32</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/C-STL/" rel="tag">C++STL</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Embedded/" rel="tag">Embedded</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/esp32/" rel="tag">esp32</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/robot-kinematics/" rel="tag">robot_kinematics</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/yolo/" rel="tag">yolo</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/C-STL/" style="font-size: 10px;">C++STL</a> <a href="/tags/Embedded/" style="font-size: 10px;">Embedded</a> <a href="/tags/esp32/" style="font-size: 10px;">esp32</a> <a href="/tags/robot-kinematics/" style="font-size: 10px;">robot_kinematics</a> <a href="/tags/yolo/" style="font-size: 10px;">yolo</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/10/">October 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/09/">September 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/08/">August 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/06/">June 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/05/">May 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/04/">April 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/01/">January 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/12/">December 2023</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/post/motion-planning.html">motion_planning</a>
          </li>
        
          <li>
            <a href="/post/Realsense.html">Realsense</a>
          </li>
        
          <li>
            <a href="/post/C-STL.html">C++STL</a>
          </li>
        
          <li>
            <a href="/post/kinematics.html">kinematics</a>
          </li>
        
          <li>
            <a href="/post/Webots.html">Webots</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2024 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>