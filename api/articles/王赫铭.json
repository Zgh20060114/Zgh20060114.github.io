{"title":"","uid":"f73a8e23e6f6f669cf99c7dba8fa0722","slug":"王赫铭","date":"2024-06-03T08:27:57.905Z","updated":"2024-06-06T00:30:55.091Z","comments":true,"path":"api/articles/王赫铭.json","keywords":null,"cover":null,"content":"<p>基础：</p>\n<div class=\"language-verilog\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">verilog</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #C792EA\">module</span><span style=\"color: #F07178\"> </span><span style=\"color: #FFCB6B\">LED_Shift_Register</span><span style=\"color: #F07178\"> (</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #F78C6C\">input</span><span style=\"color: #F07178\"> clk,       </span><span style=\"color: #676E95; font-style: italic\">// 时钟输入</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #F78C6C\">input</span><span style=\"color: #F07178\"> rst,       </span><span style=\"color: #676E95; font-style: italic\">// 复位信号</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #F78C6C\">input</span><span style=\"color: #F07178\"> [</span><span style=\"color: #F78C6C\">7</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #F07178\">] sw,  </span><span style=\"color: #676E95; font-style: italic\">// 拨码开关输入</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #F78C6C\">output</span><span style=\"color: #F07178\"> </span><span style=\"color: #F78C6C\">reg</span><span style=\"color: #F07178\"> [</span><span style=\"color: #F78C6C\">15</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #F07178\">] leds </span><span style=\"color: #676E95; font-style: italic\">// LED输出</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #F78C6C\">reg</span><span style=\"color: #F07178\"> [</span><span style=\"color: #F78C6C\">3</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #F07178\">] counter; </span><span style=\"color: #676E95; font-style: italic\">// 计数器</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #F78C6C\">always</span><span style=\"color: #F07178\"> @(</span><span style=\"color: #F78C6C\">posedge</span><span style=\"color: #F07178\"> clk </span><span style=\"color: #F78C6C\">or</span><span style=\"color: #F07178\"> </span><span style=\"color: #F78C6C\">posedge</span><span style=\"color: #F07178\"> rst) </span><span style=\"color: #F78C6C\">begin</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #F78C6C\">if</span><span style=\"color: #F07178\"> (rst) </span><span style=\"color: #F78C6C\">begin</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">        counter </span><span style=\"color: #89DDFF\">&lt;=</span><span style=\"color: #F07178\"> </span><span style=\"color: #F78C6C\">4&#39;b0000</span><span style=\"color: #F07178\">; </span><span style=\"color: #676E95; font-style: italic\">// 复位计数器</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #F78C6C\">end</span><span style=\"color: #F07178\"> </span><span style=\"color: #F78C6C\">else</span><span style=\"color: #F07178\"> </span><span style=\"color: #F78C6C\">begin</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">        </span><span style=\"color: #F78C6C\">if</span><span style=\"color: #F07178\"> (sw[</span><span style=\"color: #F78C6C\">7</span><span style=\"color: #F07178\">]) </span><span style=\"color: #F78C6C\">begin</span><span style=\"color: #F07178\"> </span><span style=\"color: #676E95; font-style: italic\">// 如果启停开关为1</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">            </span><span style=\"color: #F78C6C\">if</span><span style=\"color: #F07178\"> (counter </span><span style=\"color: #89DDFF\">==</span><span style=\"color: #F07178\"> </span><span style=\"color: #F78C6C\">4&#39;b1111</span><span style=\"color: #F07178\">) </span><span style=\"color: #F78C6C\">begin</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">                counter </span><span style=\"color: #89DDFF\">&lt;=</span><span style=\"color: #F07178\"> </span><span style=\"color: #F78C6C\">4&#39;b0000</span><span style=\"color: #F07178\">; </span><span style=\"color: #676E95; font-style: italic\">// 当计数器到达最大值时，重置计数器</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">            </span><span style=\"color: #F78C6C\">end</span><span style=\"color: #F07178\"> </span><span style=\"color: #F78C6C\">else</span><span style=\"color: #F07178\"> </span><span style=\"color: #F78C6C\">begin</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">                counter </span><span style=\"color: #89DDFF\">&lt;=</span><span style=\"color: #F07178\"> counter </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #F07178\"> </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #F07178\">; </span><span style=\"color: #676E95; font-style: italic\">// 否则递增计数器</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">            </span><span style=\"color: #F78C6C\">end</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">        </span><span style=\"color: #F78C6C\">end</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #F78C6C\">end</span></span>\n<span class=\"line\"><span style=\"color: #F78C6C\">end</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #F78C6C\">always</span><span style=\"color: #F07178\"> @(</span><span style=\"color: #F78C6C\">posedge</span><span style=\"color: #F07178\"> clk) </span><span style=\"color: #F78C6C\">begin</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #F78C6C\">if</span><span style=\"color: #F07178\"> (sw[</span><span style=\"color: #F78C6C\">7</span><span style=\"color: #F07178\">]) </span><span style=\"color: #F78C6C\">begin</span><span style=\"color: #F07178\"> </span><span style=\"color: #676E95; font-style: italic\">// 如果启停开关为1</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">        </span><span style=\"color: #F78C6C\">if</span><span style=\"color: #F07178\"> (sw[</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #F07178\">]) </span><span style=\"color: #F78C6C\">begin</span><span style=\"color: #F07178\"> </span><span style=\"color: #676E95; font-style: italic\">// 如果SW0为1，从左向右</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">            leds </span><span style=\"color: #89DDFF\">&lt;=</span><span style=\"color: #F07178\"> &#123;counter, </span><span style=\"color: #F78C6C\">12&#39;b0</span><span style=\"color: #F07178\">&#125;; </span><span style=\"color: #676E95; font-style: italic\">// 将计数器值作为LED输出</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">        </span><span style=\"color: #F78C6C\">end</span><span style=\"color: #F07178\"> </span><span style=\"color: #F78C6C\">else</span><span style=\"color: #F07178\"> </span><span style=\"color: #F78C6C\">begin</span><span style=\"color: #F07178\"> </span><span style=\"color: #676E95; font-style: italic\">// 如果SW0为0，从右向左</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">            leds </span><span style=\"color: #89DDFF\">&lt;=</span><span style=\"color: #F07178\"> &#123;</span><span style=\"color: #F78C6C\">12&#39;b0</span><span style=\"color: #F07178\">, counter&#125;; </span><span style=\"color: #676E95; font-style: italic\">// 将计数器值作为LED输出</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">        </span><span style=\"color: #F78C6C\">end</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #F78C6C\">end</span><span style=\"color: #F07178\"> </span><span style=\"color: #F78C6C\">else</span><span style=\"color: #F07178\"> </span><span style=\"color: #F78C6C\">begin</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">        leds </span><span style=\"color: #89DDFF\">&lt;=</span><span style=\"color: #F07178\"> </span><span style=\"color: #F78C6C\">16&#39;b0</span><span style=\"color: #F07178\">; </span><span style=\"color: #676E95; font-style: italic\">// 否则关闭LED</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #F78C6C\">end</span></span>\n<span class=\"line\"><span style=\"color: #F78C6C\">end</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #C792EA\">endmodule</span></span></code></pre></div><p>自动换向：</p>\n<div class=\"language-verilog\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">verilog</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #C792EA\">module</span><span style=\"color: #F07178\"> </span><span style=\"color: #FFCB6B\">LED_Shift_Register_AutoDirection</span><span style=\"color: #F07178\"> (</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #F78C6C\">input</span><span style=\"color: #F07178\"> clk,       </span><span style=\"color: #676E95; font-style: italic\">// 时钟输入</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #F78C6C\">input</span><span style=\"color: #F07178\"> rst,       </span><span style=\"color: #676E95; font-style: italic\">// 复位信号</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #F78C6C\">output</span><span style=\"color: #F07178\"> </span><span style=\"color: #F78C6C\">reg</span><span style=\"color: #F07178\"> [</span><span style=\"color: #F78C6C\">15</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #F07178\">] leds </span><span style=\"color: #676E95; font-style: italic\">// LED输出</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #F78C6C\">reg</span><span style=\"color: #F07178\"> [</span><span style=\"color: #F78C6C\">3</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #F07178\">] counter; </span><span style=\"color: #676E95; font-style: italic\">// 计数器</span></span>\n<span class=\"line\"><span style=\"color: #F78C6C\">reg</span><span style=\"color: #F07178\"> direction; </span><span style=\"color: #676E95; font-style: italic\">// 方向信号，0表示向左，1表示向右</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #F78C6C\">always</span><span style=\"color: #F07178\"> @(</span><span style=\"color: #F78C6C\">posedge</span><span style=\"color: #F07178\"> clk </span><span style=\"color: #F78C6C\">or</span><span style=\"color: #F07178\"> </span><span style=\"color: #F78C6C\">posedge</span><span style=\"color: #F07178\"> rst) </span><span style=\"color: #F78C6C\">begin</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #F78C6C\">if</span><span style=\"color: #F07178\"> (rst) </span><span style=\"color: #F78C6C\">begin</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">        counter </span><span style=\"color: #89DDFF\">&lt;=</span><span style=\"color: #F07178\"> </span><span style=\"color: #F78C6C\">4&#39;b0000</span><span style=\"color: #F07178\">; </span><span style=\"color: #676E95; font-style: italic\">// 复位计数器</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">        direction </span><span style=\"color: #89DDFF\">&lt;=</span><span style=\"color: #F07178\"> </span><span style=\"color: #F78C6C\">1&#39;b0</span><span style=\"color: #F07178\">; </span><span style=\"color: #676E95; font-style: italic\">// 初始方向为向左</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #F78C6C\">end</span><span style=\"color: #F07178\"> </span><span style=\"color: #F78C6C\">else</span><span style=\"color: #F07178\"> </span><span style=\"color: #F78C6C\">begin</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">        </span><span style=\"color: #F78C6C\">if</span><span style=\"color: #F07178\"> (counter </span><span style=\"color: #89DDFF\">==</span><span style=\"color: #F07178\"> </span><span style=\"color: #F78C6C\">4&#39;b1111</span><span style=\"color: #F07178\">) </span><span style=\"color: #F78C6C\">begin</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">            counter </span><span style=\"color: #89DDFF\">&lt;=</span><span style=\"color: #F07178\"> </span><span style=\"color: #F78C6C\">4&#39;b0000</span><span style=\"color: #F07178\">; </span><span style=\"color: #676E95; font-style: italic\">// 当计数器到达最大值时，重置计数器</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">            direction </span><span style=\"color: #89DDFF\">&lt;=</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">~</span><span style=\"color: #F07178\">direction; </span><span style=\"color: #676E95; font-style: italic\">// 切换方向</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">        </span><span style=\"color: #F78C6C\">end</span><span style=\"color: #F07178\"> </span><span style=\"color: #F78C6C\">else</span><span style=\"color: #F07178\"> </span><span style=\"color: #F78C6C\">begin</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">            counter </span><span style=\"color: #89DDFF\">&lt;=</span><span style=\"color: #F07178\"> counter </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #F07178\"> </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #F07178\">; </span><span style=\"color: #676E95; font-style: italic\">// 递增计数器</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">        </span><span style=\"color: #F78C6C\">end</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #F78C6C\">end</span></span>\n<span class=\"line\"><span style=\"color: #F78C6C\">end</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #F78C6C\">always</span><span style=\"color: #F07178\"> @(</span><span style=\"color: #F78C6C\">posedge</span><span style=\"color: #F07178\"> clk) </span><span style=\"color: #F78C6C\">begin</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #F78C6C\">if</span><span style=\"color: #F07178\"> (direction) </span><span style=\"color: #F78C6C\">begin</span><span style=\"color: #F07178\"> </span><span style=\"color: #676E95; font-style: italic\">// 如果方向为1，从右向左</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">        leds </span><span style=\"color: #89DDFF\">&lt;=</span><span style=\"color: #F07178\"> &#123;</span><span style=\"color: #F78C6C\">12&#39;b0</span><span style=\"color: #F07178\">, counter&#125;; </span><span style=\"color: #676E95; font-style: italic\">// 将计数器值作为LED输出</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #F78C6C\">end</span><span style=\"color: #F07178\"> </span><span style=\"color: #F78C6C\">else</span><span style=\"color: #F07178\"> </span><span style=\"color: #F78C6C\">begin</span><span style=\"color: #F07178\"> </span><span style=\"color: #676E95; font-style: italic\">// 如果方向为0，从左向右</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">        leds </span><span style=\"color: #89DDFF\">&lt;=</span><span style=\"color: #F07178\"> &#123;counter, </span><span style=\"color: #F78C6C\">12&#39;b0</span><span style=\"color: #F07178\">&#125;; </span><span style=\"color: #676E95; font-style: italic\">// 将计数器值作为LED输出</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #F78C6C\">end</span></span>\n<span class=\"line\"><span style=\"color: #F78C6C\">end</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #C792EA\">endmodule</span></span></code></pre></div><p>进阶：</p>\n<div class=\"language-verilog\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">verilog</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #C792EA\">module</span><span style=\"color: #F07178\"> </span><span style=\"color: #FFCB6B\">LED_Shift_Register_AutoDirection_SpeedControl</span><span style=\"color: #F07178\"> (</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #F78C6C\">input</span><span style=\"color: #F07178\"> clk,       </span><span style=\"color: #676E95; font-style: italic\">// 时钟输入</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #F78C6C\">input</span><span style=\"color: #F07178\"> rst,       </span><span style=\"color: #676E95; font-style: italic\">// 复位信号</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #F78C6C\">input</span><span style=\"color: #F07178\"> sw0,       </span><span style=\"color: #676E95; font-style: italic\">// 开关0，用于调节速度</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #F78C6C\">output</span><span style=\"color: #F07178\"> </span><span style=\"color: #F78C6C\">reg</span><span style=\"color: #F07178\"> [</span><span style=\"color: #F78C6C\">15</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #F07178\">] leds </span><span style=\"color: #676E95; font-style: italic\">// LED输出</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">);</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #F78C6C\">reg</span><span style=\"color: #F07178\"> [</span><span style=\"color: #F78C6C\">3</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #F07178\">] counter; </span><span style=\"color: #676E95; font-style: italic\">// 计数器</span></span>\n<span class=\"line\"><span style=\"color: #F78C6C\">reg</span><span style=\"color: #F07178\"> direction; </span><span style=\"color: #676E95; font-style: italic\">// 方向信号，0表示向左，1表示向右</span></span>\n<span class=\"line\"><span style=\"color: #F78C6C\">reg</span><span style=\"color: #F07178\"> [</span><span style=\"color: #F78C6C\">3</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #F07178\">] speed; </span><span style=\"color: #676E95; font-style: italic\">// 速度调节器</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #F78C6C\">always</span><span style=\"color: #F07178\"> @(</span><span style=\"color: #F78C6C\">posedge</span><span style=\"color: #F07178\"> clk </span><span style=\"color: #F78C6C\">or</span><span style=\"color: #F07178\"> </span><span style=\"color: #F78C6C\">posedge</span><span style=\"color: #F07178\"> rst) </span><span style=\"color: #F78C6C\">begin</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #F78C6C\">if</span><span style=\"color: #F07178\"> (rst) </span><span style=\"color: #F78C6C\">begin</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">        counter </span><span style=\"color: #89DDFF\">&lt;=</span><span style=\"color: #F07178\"> </span><span style=\"color: #F78C6C\">4&#39;b0000</span><span style=\"color: #F07178\">; </span><span style=\"color: #676E95; font-style: italic\">// 复位计数器</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">        direction </span><span style=\"color: #89DDFF\">&lt;=</span><span style=\"color: #F07178\"> </span><span style=\"color: #F78C6C\">1&#39;b0</span><span style=\"color: #F07178\">; </span><span style=\"color: #676E95; font-style: italic\">// 初始方向为向左</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">        speed </span><span style=\"color: #89DDFF\">&lt;=</span><span style=\"color: #F07178\"> </span><span style=\"color: #F78C6C\">4&#39;b0000</span><span style=\"color: #F07178\">; </span><span style=\"color: #676E95; font-style: italic\">// 初始速度为最慢</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #F78C6C\">end</span><span style=\"color: #F07178\"> </span><span style=\"color: #F78C6C\">else</span><span style=\"color: #F07178\"> </span><span style=\"color: #F78C6C\">begin</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">        </span><span style=\"color: #F78C6C\">if</span><span style=\"color: #F07178\"> (counter </span><span style=\"color: #89DDFF\">==</span><span style=\"color: #F07178\"> speed) </span><span style=\"color: #F78C6C\">begin</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">            counter </span><span style=\"color: #89DDFF\">&lt;=</span><span style=\"color: #F07178\"> </span><span style=\"color: #F78C6C\">4&#39;b0000</span><span style=\"color: #F07178\">; </span><span style=\"color: #676E95; font-style: italic\">// 当计数器计数达到速度值时，重置计数器</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">            </span><span style=\"color: #F78C6C\">if</span><span style=\"color: #F07178\"> (sw0) </span><span style=\"color: #F78C6C\">begin</span><span style=\"color: #F07178\"> </span><span style=\"color: #676E95; font-style: italic\">// 如果SW0为1，增加速度</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">                </span><span style=\"color: #F78C6C\">if</span><span style=\"color: #F07178\"> (speed </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #F07178\"> </span><span style=\"color: #F78C6C\">4&#39;b1111</span><span style=\"color: #F07178\">) </span><span style=\"color: #F78C6C\">begin</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">                    speed </span><span style=\"color: #89DDFF\">&lt;=</span><span style=\"color: #F07178\"> speed </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #F07178\"> </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #F07178\">; </span><span style=\"color: #676E95; font-style: italic\">// 递增速度</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">                </span><span style=\"color: #F78C6C\">end</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">            </span><span style=\"color: #F78C6C\">end</span><span style=\"color: #F07178\"> </span><span style=\"color: #F78C6C\">else</span><span style=\"color: #F07178\"> </span><span style=\"color: #F78C6C\">begin</span><span style=\"color: #F07178\"> </span><span style=\"color: #676E95; font-style: italic\">// 如果SW0为0，减小速度</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">                </span><span style=\"color: #F78C6C\">if</span><span style=\"color: #F07178\"> (speed </span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #F07178\"> </span><span style=\"color: #F78C6C\">4&#39;b0000</span><span style=\"color: #F07178\">) </span><span style=\"color: #F78C6C\">begin</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">                    speed </span><span style=\"color: #89DDFF\">&lt;=</span><span style=\"color: #F07178\"> speed </span><span style=\"color: #89DDFF\">-</span><span style=\"color: #F07178\"> </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #F07178\">; </span><span style=\"color: #676E95; font-style: italic\">// 递减速度</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">                </span><span style=\"color: #F78C6C\">end</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">            </span><span style=\"color: #F78C6C\">end</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">            </span><span style=\"color: #F78C6C\">if</span><span style=\"color: #F07178\"> (direction) </span><span style=\"color: #F78C6C\">begin</span><span style=\"color: #F07178\"> </span><span style=\"color: #676E95; font-style: italic\">// 如果方向为1，从右向左</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">                </span><span style=\"color: #F78C6C\">if</span><span style=\"color: #F07178\"> (leds </span><span style=\"color: #89DDFF\">!=</span><span style=\"color: #F07178\"> </span><span style=\"color: #F78C6C\">16&#39;b0000000000000001</span><span style=\"color: #F07178\">) </span><span style=\"color: #F78C6C\">begin</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">                    leds </span><span style=\"color: #89DDFF\">&lt;=</span><span style=\"color: #F07178\"> &#123;leds[</span><span style=\"color: #F78C6C\">13</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #F07178\">], </span><span style=\"color: #F78C6C\">2&#39;b00</span><span style=\"color: #F07178\">&#125; </span><span style=\"color: #676E95; font-style: italic\">// 向右移动</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">                </span><span style=\"color: #F78C6C\">end</span><span style=\"color: #F07178\"> </span><span style=\"color: #F78C6C\">else</span><span style=\"color: #F07178\"> </span><span style=\"color: #F78C6C\">begin</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">                    direction </span><span style=\"color: #89DDFF\">&lt;=</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">~</span><span style=\"color: #F07178\">direction; </span><span style=\"color: #676E95; font-style: italic\">// 切换方向</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">                </span><span style=\"color: #F78C6C\">end</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">            </span><span style=\"color: #F78C6C\">end</span><span style=\"color: #F07178\"> </span><span style=\"color: #F78C6C\">else</span><span style=\"color: #F07178\"> </span><span style=\"color: #F78C6C\">begin</span><span style=\"color: #F07178\"> </span><span style=\"color: #676E95; font-style: italic\">// 如果方向为0，从左向右</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">                </span><span style=\"color: #F78C6C\">if</span><span style=\"color: #F07178\"> (leds </span><span style=\"color: #89DDFF\">!=</span><span style=\"color: #F07178\"> </span><span style=\"color: #F78C6C\">16&#39;b1000000000000000</span><span style=\"color: #F07178\">) </span><span style=\"color: #F78C6C\">begin</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">                    leds </span><span style=\"color: #89DDFF\">&lt;=</span><span style=\"color: #F07178\"> &#123;</span><span style=\"color: #F78C6C\">2&#39;b00</span><span style=\"color: #F07178\">, leds[</span><span style=\"color: #F78C6C\">15</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #F78C6C\">2</span><span style=\"color: #F07178\">]&#125;; </span><span style=\"color: #676E95; font-style: italic\">// 向左移动</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">                </span><span style=\"color: #F78C6C\">end</span><span style=\"color: #F07178\"> </span><span style=\"color: #F78C6C\">else</span><span style=\"color: #F07178\"> </span><span style=\"color: #F78C6C\">begin</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">                    direction </span><span style=\"color: #89DDFF\">&lt;=</span><span style=\"color: #F07178\"> </span><span style=\"color: #89DDFF\">~</span><span style=\"color: #F07178\">direction; </span><span style=\"color: #676E95; font-style: italic\">// 切换方向</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">                </span><span style=\"color: #F78C6C\">end</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">            </span><span style=\"color: #F78C6C\">end</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">        </span><span style=\"color: #F78C6C\">end</span><span style=\"color: #F07178\"> </span><span style=\"color: #F78C6C\">else</span><span style=\"color: #F07178\"> </span><span style=\"color: #F78C6C\">begin</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">            counter </span><span style=\"color: #89DDFF\">&lt;=</span><span style=\"color: #F07178\"> counter </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #F07178\"> </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #F07178\">; </span><span style=\"color: #676E95; font-style: italic\">// 递增计数器</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">        </span><span style=\"color: #F78C6C\">end</span></span>\n<span class=\"line\"><span style=\"color: #F07178\">    </span><span style=\"color: #F78C6C\">end</span></span>\n<span class=\"line\"><span style=\"color: #F78C6C\">end</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #C792EA\">endmodule</span></span></code></pre></div><p>使用Vulkan对Xe显卡加速后能够达到50-60fps的速度，</p>\n","feature":true,"text":"基础： verilogmodule LED_Shift_Register ( input clk, // 时钟输入 input rst, // 复位信号 inp...","permalink":"/post/王赫铭","photos":[],"count_time":{"symbolsCount":"3.5k","symbolsTime":"3 mins."},"categories":[],"tags":[],"toc":"","author":{"name":"Zgh","slug":"blog-author","avatar":"","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"raytracing","uid":"6423712d5b034a9ffa873eac01a6fcae","slug":"raytracing","date":"2024-06-12T08:08:14.000Z","updated":"2024-06-12T08:08:14.408Z","comments":true,"path":"api/articles/raytracing.json","keywords":null,"cover":null,"text":"","permalink":"/post/raytracing","photos":[],"count_time":{"symbolsCount":0,"symbolsTime":"1 mins."},"categories":[],"tags":[],"author":{"name":"Zgh","slug":"blog-author","avatar":"","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"feature":true},"next_post":{"title":"FOC","uid":"5ed8025b2d97b0226e087fa7327026b0","slug":"FOC","date":"2024-05-28T23:30:54.000Z","updated":"2024-05-31T13:54:45.736Z","comments":true,"path":"api/articles/FOC.json","keywords":null,"cover":[],"text":"可以看出，我们只需要像步进电机那样不断的重复这六部换向就可以让BLDC转动起来，甚至会产生一种错觉，是不是我们换向越快电机转的越快呢？答案是:否，这里我们一定要...","permalink":"/post/FOC","photos":[],"count_time":{"symbolsCount":"1.2k","symbolsTime":"1 mins."},"categories":[],"tags":[],"author":{"name":"Zgh","slug":"blog-author","avatar":"","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"feature":true}}