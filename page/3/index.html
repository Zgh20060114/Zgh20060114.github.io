<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Zgh&#39;s</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="Zgh的个人站">
<meta property="og:type" content="website">
<meta property="og:title" content="Zgh&#39;s">
<meta property="og:url" content="http://zgh20060114.github.io/page/3/index.html">
<meta property="og:site_name" content="Zgh&#39;s">
<meta property="og:description" content="Zgh的个人站">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Zgh's" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Zgh&#39;s</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="Search"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://Zgh20060114.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-Esp32" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/post/Esp32.html" class="article-date">
  <time class="dt-published" datetime="2023-12-20T08:57:19.000Z" itemprop="datePublished">2023-12-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/post/Esp32.html">Esp32</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><img src="/../images/image-20231220165744944.png" alt="image-20231220165744944"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zgh20060114.github.io/post/Esp32.html" data-id="clxbjvuxn000561cx1s3tboj4" data-title="Esp32" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/esp32/" rel="tag">esp32</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-yolov5" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/post/yolov5.html" class="article-date">
  <time class="dt-published" datetime="2023-12-16T12:04:59.000Z" itemprop="datePublished">2023-12-16</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/post/yolov5.html">yolov5</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><img src="/../images/image-20231216210026711.png" alt="image-20231216210026711"></p>
<p><img src="/../images/image-20231216210245075.png" alt="image-20231216210245075"></p>
<h4 id="IOU-—-交并比"><a href="#IOU-—-交并比" class="headerlink" title="IOU —-交并比"></a>IOU —-交并比</h4><p><img src="/../images/image-20231216210441830.png" alt="image-20231216210441830"></p>
<p>Lou为1意味着预测边界框和地面真实边界框完全重叠。<br>您可以为LOU设置阈值，以确定对象检测是否有效。<br>假设您将LOU设置为0.5，在这种情况下。<br>·如果LOU≥为0.5，则将目标检测归类为真阳性(TP)。<br>如果LOU&lt;0.5，则为错误检测，并将其归类为假阳性(FP)。<br>当图像中存在地面真实且模型未能检测到目标时，分类。<br>作为假阴性(FN)。<br>真负片(TN)：TN是我们没有预测到物体的图像的每一部分。<br>度量对于目标检测没有用处，因此我们忽略TN。</p>
<p><img src="/../images/image-20231216210636311.png" alt="image-20231216210636311"></p>
<h4 id="AP-MAP"><a href="#AP-MAP" class="headerlink" title="AP,MAP"></a>AP,MAP</h4><p><img src="/../images/image-20231216210923498.png" alt="image-20231216210923498"></p>
<p><img src="/../images/image-20231216211711468.png" alt="image-20231216211711468"></p>
<p><img src="/../images/image-20231216211921852.png" alt="image-20231216211921852"></p>
<p><img src="/../images/image-20231216204704657.png" alt="image-20231216204704657">   </p>
<p><img src="/../images/image-20231216204353728.png" alt="image-20231216204353728"> </p>
<h4 id="网络架构和组件"><a href="#网络架构和组件" class="headerlink" title="网络架构和组件"></a>网络架构和组件</h4><p>单阶段检测器：</p>
<p><img src="/../images/image-20231216205751067.png" alt="image-20231216205751067"></p>
<p>yolov5：（没有划出专门的颈部Neck）</p>
<p><img src="/../images/image-20231216212300844.png" alt="image-20231216212300844"></p>
<p>git clone <a target="_blank" rel="noopener" href="https://github.moeyy.xyz/https://github.com/ultralytics/yolov5.git">https://github.moeyy.xyz/https://github.com/ultralytics/yolov5.git</a></p>
<p><img src="/../images/image-20231217123703969.png" alt="image-20231217123703969"></p>
<ol>
<li><code>nc: 80</code>：这个参数表示模型分类数量（number of classes），默认为 80，对应着 COCO 数据集。</li>
<li><code>depth_multiple: 0.33</code>：这个参数表示模型深度相对于基础版本的倍数。在 YOLOv5 中，有 S、M、L 和 X 四个版本，其中 S 为基础版本，即 <code>depth_multiple: 1.0</code>，而 M、L 和 X 版本为在此基础上分别加深了一定的层数。而 <code>depth_multiple: 0.33</code> 表示在 S 版本的基础上，深度缩小了 3 倍，即变成了 <code>depth_multiple: 0.33</code> × 3 &#x3D; 0.99。</li>
<li><code>width_multiple: 0.50</code>：这个参数表示模型通道宽度相对于基础版本的倍数。与 <code>depth_multiple</code> 类似，S 版本的 <code>width_multiple</code> 是 1.0，而 M、L 和 X 版本则在此基础上分别扩大了一定的倍数。</li>
<li><code>anchors</code>：这是一个锚点数组，用于定义不同尺度下的 anchor boxes。YOLOv5 中使用了三个不同的尺度，每个尺度使用三个不同的 anchor boxes。这些锚点大小是相对于输入图像的，因此不同尺度下的大小会有所差别。</li>
<li><code>backbone</code>：这一部分定义了模型的骨干网络（backbone），包括卷积层、批归一化层和激活函数等。YOLOv5 使用了 CSPDarknet53 这个网络作为基础骨干网络，并在此基础上进行改进。具体而言，YOLOv5 增加了空间注意力机制和SPP模块，以增强特征表达能力。</li>
<li><code>head</code>：这一部分定义了模型的检测头（detection head），包括检测网络和分类网络。YOLOv5 中的检测网络采用了YOLOv3中的FPN结构，并在此基础上加入了PANet模块和SAM模块，以提高检测性能。</li>
</ol>
<p>序列数据的不同采样方法（随机采样和顺序分区）会导致隐状态初始化的差异，原因如下：</p>
<ol>
<li>随机采样： 在随机采样中，我们从序列数据中随机选择一个序列作为训练样本。这意味着每次训练时，我们都使用不同的序列作为输入。由于每个序列可能具有不同的上下文和语义信息，模型在每次训练时都需要重新适应不同的序列特征。因此，随机采样会导致隐状态的初始化与之前的训练批次存在一定差异。</li>
<li>顺序分区： 在顺序分区中，我们按顺序依次读取序列数据进行训练。这意味着模型在每个训练批次中都会接收到相邻的序列数据。由于相邻的序列通常具有相似的上下文和语义信息，模型可以利用之前批次的隐藏状态来帮助理解当前批次的序列。因此，顺序分区会导致隐状态的初始化与之前的训练批次存在一定的相关性。</li>
</ol>
<p>不同的隐状态初始化差异可能会对模型的训练和预测产生影响。随机采样可以增加数据的多样性，帮助模型更好地适应不同的序列特征。然而，随机采样可能也会引入一些噪声，导致训练过程更加不稳定。顺序分区可以利用相邻序列之间的相关性，帮助模型更好地捕捉到序列的上下文信息。然而，顺序分区可能会限制模型对不同序列特征的适应能力。</p>
<p>困惑度（perplexity）是自然语言处理中常用的一个评价指标，主要用于衡量语言模型的预测性能。困惑度越低，表示模型的预测能力越好。</p>
<p>在自然语言处理中，我们通常使用语言模型来计算文本序列的概率。给定一个文本序列 $W&#x3D;w_1,w_2,…,w_n$，其概率可以表示为：</p>
<p>$$<br>P(W)&#x3D;P(w_1)\times P(w_2|w_1) \times … \times P(w_n|w_1,w_2,…,w_{n-1})<br>$$</p>
<p>其中，$P(w_i|w_1,w_2,…,w_{i-1})$ 表示在已知前面 $i-1$ 个词的情况下，第 $i$ 个词的概率。语言模型的目标就是学习这种条件概率分布。在模型训练过程中，我们通常会使用最大似然估计法来估计模型参数。</p>
<p>困惑度是一个数值指标，表示用当前语言模型对一个测试集进行预测时所得到的困惑程度。具体而言，如果测试集包含 $N$ 个词，我们可以计算出每个词的概率 $P(w_i)$，然后将这些概率求倒数并取对数，即：</p>
<p>$$<br>\log \frac{1}{P(w_1)}+\log \frac{1}{P(w_2|w_1)}+…+\log \frac{1}{P(w_N|w_1,w_2,…,w_{N-1})}<br>$$</p>
<p>然后，我们可以将上述结果除以测试集中的词数 $N$，得到平均困惑度。具体而言，平均困惑度的计算公式如下：</p>
<p>$$<br>\text{Perplexity}&#x3D;exp\left(-\frac{1}{N}\sum_{i&#x3D;1}^{N}\log P(w_i)\right)<br>$$</p>
<p>例如，如果我们有一个包含100个句子的测试集，其中总共包含1000个词，我们可以使用语言模型来预测每个词的概率，并计算出平均困惑度。假设我们的模型预测准确率较高，平均每个词的概率为0.9，则平均困惑度为：</p>
<p>$$<br>exp\left(-\frac{1}{1000}\sum_{i&#x3D;1}^{1000}\log 0.9\right) \approx 2.15<br>$$</p>
<p>这表示我们的模型对测试集中的文本序列进行预测时，每个词的平均困惑度为2.15。如果我们使用一个更好的语言模型，其困惑度可能会更低。</p>
<p>用困惑度来评价模型确保了不同长度的序列具有可比性</p>
<h4 id="路径聚合网络模块"><a href="#路径聚合网络模块" class="headerlink" title="路径聚合网络模块"></a>路径聚合网络模块</h4><p><img src="/../images/image-20231219133825543.png" alt="image-20231219133825543"></p>
<h4 id="Focus处理模块"><a href="#Focus处理模块" class="headerlink" title="Focus处理模块"></a>Focus处理模块</h4><p><img src="/../images/image-20231219133907407.png" alt="image-20231219133907407"></p>
<h4 id="空间金字塔池化模块"><a href="#空间金字塔池化模块" class="headerlink" title="空间金字塔池化模块"></a>空间金字塔池化模块</h4><p><img src="/../images/image-20231219134700073.png" alt="image-20231219134700073"></p>
<h4 id="跨阶段局部网络模块"><a href="#跨阶段局部网络模块" class="headerlink" title="跨阶段局部网络模块"></a>跨阶段局部网络模块</h4><p><img src="/../images/image-20231219134949252.png" alt="image-20231219134949252"></p>
<p><img src="/../images/image-20231219135635494.png" alt="image-20231219135635494"></p>
<p>​	</p>
<h1 id="IoU、GIoU、DIoU、CIoU损失函数"><a href="#IoU、GIoU、DIoU、CIoU损失函数" class="headerlink" title="     IoU、GIoU、DIoU、CIoU损失函数         "></a><a target="_blank" rel="noopener" href="https://www.cnblogs.com/wujianming-110117/p/13019343.html">     IoU、GIoU、DIoU、CIoU损失函数         </a></h1><p>IoU、GIoU、DIoU、CIoU损失函数</p>
<h1 id="目标检测任务的损失函数由Classificition-Loss和Bounding-Box-Regeression-Loss两部分构成。目标检测任务中近几年来Bounding-Box-Regression-Loss-Function的演进过程，其演进路线是"><a href="#目标检测任务的损失函数由Classificition-Loss和Bounding-Box-Regeression-Loss两部分构成。目标检测任务中近几年来Bounding-Box-Regression-Loss-Function的演进过程，其演进路线是" class="headerlink" title="目标检测任务的损失函数由Classificition Loss和Bounding Box Regeression Loss两部分构成。目标检测任务中近几年来Bounding Box Regression Loss Function的演进过程，其演进路线是"></a>目标检测任务的损失函数由Classificition Loss和Bounding Box Regeression Loss两部分构成。目标检测任务中近几年来Bounding Box Regression Loss Function的演进过程，其演进路线是</h1><h1 id=""><a href="#" class="headerlink" title=""></a><img src="/../images/1251718-20200531153858189-1225302034.png" alt="img"></h1><h1 id="一、IOU-Intersection-over-Union"><a href="#一、IOU-Intersection-over-Union" class="headerlink" title="一、IOU(Intersection over Union)"></a><strong>一、IOU(Intersection over Union)</strong></h1><p><strong>1.</strong> <strong>特性(优点)</strong></p>
<p>IoU就是我们所说的<strong>交并比</strong>，是目标检测中最常用的指标，在anchor-based的方法。作用不仅用来确定正样本和负样本，还可以用来评价输出框（predict box）和ground-truth的距离。</p>
<p> <img src="/../images/1251718-20200531153951865-814017809.png" alt="img"></p>
<p> \1. 可以说<strong>它可以反映预测检测框与真实检测框的检测效果。</strong></p>
<p> \2. 还有一个很好的特性就是<strong>尺度不变性</strong>，也就是对尺度不敏感（scale invariant）， 在regression任务中，判断predict box和gt的距离最直接的指标就是IoU。**(**<strong>满足非负性；同一性；对称性；三角不等性)</strong></p>
<p><img src="/../images/1251718-20200531154027996-533351609.png" alt="img"></p>
<p> <strong>2.</strong> <strong>作为损失函数会出现的问题(缺点)</strong></p>
<p>\1. 如果两个框没有相交，根据定义，IoU&#x3D;0，不能反映两者的距离大小（重合度）。同时因为loss&#x3D;0，没有梯度回传，无法进行学习训练。</p>
<p> \2. IoU无法精确的反映两者的重合度大小。如下图所示，三种情况IoU都相等，但看得出来他们的重合度是不一样的，左边的图回归的效果最好，右边的最差。</p>
<p> <img src="/../images/1251718-20200531154239104-440943615.png" alt="img"></p>
<p> <strong>二、GIOU(Generalized Intersection over Union)</strong></p>
<p><strong>1****、来源</strong></p>
<p>在CVPR2019中，论文</p>
<p>《Generalized Intersection over Union: A Metric and A Loss for Bounding Box Regression》<br> https:arxiv.org&#x2F;abs&#x2F;1902.09630</p>
<p>提出了GIoU的思想。由于IoU是<strong>比值</strong>的概念，对目标物体的scale是不敏感的。然而检测任务中的BBox的回归损失(MSE loss, l1-smooth loss等）优化和IoU优化不是完全等价的，而且 Ln 范数对物体的scale也比较敏感，IoU无法直接优化没有重叠的部分。</p>
<p> <img src="/../images/1251718-20200531154308726-1360939519.png" alt="img"></p>
<p> 这篇论文提出可以直接把IoU设为回归的loss。</p>
<p> <img src="/../images/1251718-20200531154354415-2037289028.png" alt="img"></p>
<p> 上面公式的意思是：先计算两个框的最小闭包区域面积_ _(通俗理解：<strong>同时包含了预测框和真实框</strong>的最小框的面积)，再计算出IoU，再计算闭包区域中不属于两个框的区域占闭包区域的比重，最后用IoU减去这个比重得到GIoU。</p>
<p> 附：<a target="_blank" rel="noopener" href="https://github.com/generalized-iou/g-darknet">https://github.com/generalized-iou/g-darknet</a></p>
<p><strong>2****、 特性</strong>[1]</p>
<p>与IoU相似，GIoU也是一种距离度量，作为损失函数的话， ,满足损失函数的基本要求</p>
<p>GIoU对scale不敏感</p>
<p>GIoU是IoU的下界，在两个框无线重合的情况下，IoU&#x3D;GIoU</p>
<p>IoU取值[0,1]，但GIoU有对称区间，取值范围[-1,1]。在两者重合的时候取最大值1，在两者无交集且无限远的时候取最小值-1，因此GIoU是一个非常好的距离度量指标。</p>
<p>与IoU只关注重叠区域不同，<strong>GIoU****不仅关注重叠区域，还关注其他的非重合区域</strong>，能更好的反映两者的重合度。</p>
<p> <img src="/../images/1251718-20200531154522456-385805448.png" alt="img"></p>
<p> <img src="/../images/1251718-20200531154732786-1909345970.png" alt="img"></p>
<p> <strong>三、DIoU(Distance-IoU)[2]</strong></p>
<p>**1,**<strong>来源</strong></p>
<p>DIoU要比GIou更加符合目标框回归的机制，<strong>将目标与anchor之间的距离，重叠率以及尺度都考虑进去</strong>，使得目标框回归变得更加稳定，不会像IoU和GIoU一样出现训练过程中发散等问题。论文中</p>
<p>Distance-IoU<br> <a target="_blank" rel="noopener" href="https://arxiv.org/pdf/1911.08287.pdf">https://arxiv.org/pdf/1911.08287.pdf</a></p>
<p>基于IoU和GIoU存在的问题，作者提出了两个问题：<br> \1. 直接最小化anchor框与目标框之间的归一化距离是否可行，以达到更快的收敛速度？<br> \2. 如何使回归在与目标框有重叠甚至包含时更准确、更快？</p>
<p> <img src="/../images/1251718-20200531154844425-632049559.png" alt="img"></p>
<p> 其中，<img src="/../images/1251718-20200531154815739-471463487.png" alt="img">分别代表了预测框和真实框的中心点，<img src="/../images/1251718-20200531154909041-22064640.png" alt="img">且代表的是计算两个中心点间的欧式距离。c代表的是能够同时包含预测框和真实框的<strong>最小闭包区域</strong>的对角线距离。</p>
<p> <img src="/../images/1251718-20200531154956953-836811449.png" alt="img"></p>
<p> <img src="/../images/1251718-20200531155026159-588849996.png" alt="img"></p>
<p> DIoU中对anchor框和目标框之间的归一化距离进行了建模</p>
<p>附：</p>
<p>YOLOV3 DIoU GitHub项目地址<br> https&#x2F;&#x2F;github.com&#x2F;Zzh-tju&#x2F;DIoU-darknet</p>
<p><strong>2****、优点</strong></p>
<p>与GIoU loss类似，DIoU loss（ ）在与目标框不重叠时，仍然可以为边界框提供移动方向。</p>
<p>DIoU loss可以直接最小化两个目标框的距离，因此比GIoU loss收敛快得多。</p>
<p>对于包含两个框在水平方向和垂直方向上这种情况，DIoU损失可以使回归非常快，而GIoU损失几乎退化为IoU损失。</p>
<p>DIoU还可以替换普通的IoU评价策略，应用于NMS中，使得NMS得到的结果更加合理和有效。</p>
<p>实现代码：[3]</p>
<p> <img src="/../images/1251718-20200531155128579-1060794147.png" alt="img"></p>
<p> <img src="/../images/1251718-20200531155210632-956163178.png" alt="img"></p>
<p> <strong>四、CIoU(Complete-IoU)</strong></p>
<p>论文考虑到bbox回归三要素中的长宽比还没被考虑到计算中，因此，进一步在DIoU的基础上提出了CIoU。其惩罚项如下面公式：</p>
<p> <img src="/../images/1251718-20200531155238128-675856095.png" alt="img"></p>
<p> 实现代码：[5] </p>
<p> <img src="/../images/1251718-20200531155304911-1990080212.png" alt="img"></p>
<p> <img src="/../images/1251718-20200531155316931-2121130060.png" alt="img"></p>
<p> <img src="/../images/1251718-20200531155335490-1670997408.png" alt="img"></p>
<p><img src="/../images/image-20231219142055992.png" alt="image-20231219142055992"></p>
<p><img src="/../images/image-20231219142702047.png" alt="image-20231219142702047"></p>
<h4 id="L-IoU-1-IoU-L-GIoU-1-GIoU"><a href="#L-IoU-1-IoU-L-GIoU-1-GIoU" class="headerlink" title="L(IoU)&#x3D;1-IoU,L(GIoU)&#x3D;1-GIoU"></a>L(IoU)&#x3D;1-IoU,L(GIoU)&#x3D;1-GIoU</h4><p><img src="/../images/image-20231219143118491.png" alt="image-20231219143118491"></p>
<p><img src="/../images/image-20231219143242889.png" alt="image-20231219143242889"></p>
<h4 id="penalty-item-惩罚项"><a href="#penalty-item-惩罚项" class="headerlink" title="penalty item 惩罚项"></a>penalty item 惩罚项</h4><p><img src="/../images/image-20231219143834054.png" alt="image-20231219143834054"></p>
<p><img src="/../images/image-20231219143908214.png" alt="image-20231219143908214"></p>
<p><img src="/../images/image-20231219144615647.png" alt="image-20231219144615647"></p>
<p><img src="/../images/image-20231219144820908.png" alt="image-20231219144820908"></p>
<h4 id="用1替换"><a href="#用1替换" class="headerlink" title="用1替换"></a>用1替换</h4><p><img src="/../images/image-20231220151820969.png" alt="image-20231220151820969"><img src="/../images/image-20231220151851064.png" alt="image-20231220151851064"></p>
<p><img src="/../images/image-20231220151924519.png" alt="image-20231220151924519"></p>
<p><img src="/../images/image-20231220152401000.png" alt="image-20231220152401000"></p>
<p><strong>YOLO训练技巧</strong></p>
<p><strong>1.</strong></p>
<p><img src="/../images/image-20231221102150112.png" alt="image-20231221102150112"></p>
<p><em>2.</em></p>
<p><img src="/../images/image-20231221102343926.png" alt="image-20231221102343926">余弦退火学习率调整的原理是根据余弦函数的形状动态地调整学习率。它通过将学习率从一个较大的初始值逐渐减小到一个较小的最小值来控制训练过程中的学习率变化。</p>
<p>具体实现步骤如下：</p>
<ol>
<li>设置一个最大学习率和最小学习率的范围。</li>
<li>定义一个周期数（通常是训练的总迭代次数）。</li>
<li>对于每个训练迭代，计算当前周期数与总周期数之间的比例。</li>
<li>使用余弦函数来动态计算学习率，公式如下：</li>
</ol>
<div class="language-txt"><button title="Copy code" class="copy"></button><span class="lang">txt</span><pre class="shiki material-theme-palenight" style="background-color: #1a1a1a" tabindex="0"><code><span class="line"><span style="color: #babed8">lr = lr_min + 0.5 * (lr_max - lr_min) * (1 + cos(epoch / T_total * pi))</span></span></code></pre></div><p>其中，lr表示当前学习率，epoch表示当前周期数，T_total表示总周期数，lr_max表示最大学习率，lr_min表示最小学习率。</p>
<ol start="5">
<li>将计算得到的学习率应用于优化器中进行权重更新。</li>
</ol>
<p>使用余弦退火学习率调整可以在训练初期使用较大的学习率来快速收敛，然后逐渐减小学习率以细化模型的优化过程。这种方法在训练中期能够跳出局部最优解并找到更好的全局最优解，有助于提高模型的泛化性能和训练效果。</p>
<h4 id="3"><a href="#3" class="headerlink" title="3."></a>3.</h4><p><img src="/../images/image-20231221103518038.png" alt="image-20231221103518038"></p>
<h4 id="4"><a href="#4" class="headerlink" title="4."></a>4.</h4><p><img src="/../images/image-20231221103556292.png" alt="image-20231221103556292"></p>
<h4 id="5-遗传算法"><a href="#5-遗传算法" class="headerlink" title="5.遗传算法"></a>5.遗传算法</h4><p><img src="/../images/image-20231221103654283.png" alt="image-20231221103654283"></p>
<h4 id="6-AMP"><a href="#6-AMP" class="headerlink" title="6.AMP"></a>6.AMP</h4><p><img src="/../images/image-20231221103725894.png" alt="image-20231221103725894"></p>
<h4 id="7"><a href="#7" class="headerlink" title="7."></a><img src="/../images/image-20231221103836498.png" alt="image-20231221103836498">7.</h4><p><img src="/../images/image-20231221104450473.png" alt="image-20231221104450473"></p>
<h4 id="激活函数"><a href="#激活函数" class="headerlink" title="激活函数"></a>激活函数</h4><p><img src="/../images/image-20231222110059278.png" alt="image-20231222110059278"></p>
<p><img src="/../images/image-20231222110124317.png" alt="image-20231222110124317"></p>
<p><img src="/../images/image-20231222110150825.png" alt="image-20231222110150825"></p>
<p><img src="/../images/image-20231222110400513.png" alt="image-20231222110400513"></p>
<p><img src="/../images/image-20231222111314420.png" alt="image-20231222111314420"></p>
<h4 id="优点：激活区域可以更多样"><a href="#优点：激活区域可以更多样" class="headerlink" title="优点：激活区域可以更多样"></a><img src="/../images/image-20231222111341197.png" alt="image-20231222111341197">优点：激活区域可以更多样</h4><p><img src="/../images/image-20231222111510179.png" alt="image-20231222111510179"></p>
<h4 id="因此，引入了各种方法来压缩神经网络，以使大型模型可以在边缘设备上部署。模型压缩方法可以分为3类：剪枝、量化和知识蒸馏。在剪枝中，移除模型中不重要的冗余参数，以获得稀疏-紧凑的模型结构。量化涉及使用低精度数据类型表示模型的激活和权重。最后，知识蒸馏是指利用大型准确模型作为教师来训练一个小型模型，使用教师模型提供的软标签来进行训练。"><a href="#因此，引入了各种方法来压缩神经网络，以使大型模型可以在边缘设备上部署。模型压缩方法可以分为3类：剪枝、量化和知识蒸馏。在剪枝中，移除模型中不重要的冗余参数，以获得稀疏-紧凑的模型结构。量化涉及使用低精度数据类型表示模型的激活和权重。最后，知识蒸馏是指利用大型准确模型作为教师来训练一个小型模型，使用教师模型提供的软标签来进行训练。" class="headerlink" title="因此，引入了各种方法来压缩神经网络，以使大型模型可以在边缘设备上部署。模型压缩方法可以分为3类：剪枝、量化和知识蒸馏。在剪枝中，移除模型中不重要的冗余参数，以获得稀疏&#x2F;紧凑的模型结构。量化涉及使用低精度数据类型表示模型的激活和权重。最后，知识蒸馏是指利用大型准确模型作为教师来训练一个小型模型，使用教师模型提供的软标签来进行训练。"></a>因此，引入了各种方法来压缩神经网络，以使大型模型可以在边缘设备上部署。模型压缩方法可以分为3类：剪枝、量化和知识蒸馏。在剪枝中，移除模型中不重要的冗余参数，以获得稀疏&#x2F;紧凑的模型结构。量化涉及使用低精度数据类型表示模型的激活和权重。最后，知识蒸馏是指利用大型准确模型作为教师来训练一个小型模型，使用教师模型提供的软标签来进行训练。</h4><p>cmake_minimum_required(VERSION 3.10) project(yolov5) add_definitions(-std&#x3D;c++11) add_definitions(-DAPI_EXPORTS) option(CUDA_USE_STATIC_CUDA_RUNTIME OFF) set(CMAKE_CXX_STANDARD 11) set(CMAKE_BUILD_TYPE Debug) # TODO(Call for PR): make cmake compatible with Windows set(CMAKE_CUDA_COMPILER &#x2F;usr&#x2F;local&#x2F;cuda-12.2&#x2F;bin&#x2F;nvcc) enable_language(CUDA) # include and link dirs of cuda and tensorrt, you need adapt them if yours are different # cuda include_directories(&#x2F;usr&#x2F;local&#x2F;cuda-12.2&#x2F;include) link_directories(&#x2F;usr&#x2F;local&#x2F;cuda-12.2&#x2F;lib64) # tensorrt # TODO(Call for PR): make TRT path configurable from command line include_directories(&#x2F;home&#x2F;nvidia&#x2F;TensorRT-8.2.5.1&#x2F;include&#x2F;) link_directories(&#x2F;home&#x2F;nvidia&#x2F;TensorRT-8.2.5.1&#x2F;lib&#x2F;) include_directories(${PROJECT_SOURCE_DIR}&#x2F;src&#x2F;) include_directories(${PROJECT_SOURCE_DIR}&#x2F;plugin&#x2F;) file(GLOB_RECURSE SRCS ${PROJECT_SOURCE_DIR}&#x2F;src&#x2F;<em>.cpp ${PROJECT_SOURCE_DIR}&#x2F;src&#x2F;</em>.cu) file(GLOB_RECURSE PLUGIN_SRCS ${PROJECT_SOURCE_DIR}&#x2F;plugin&#x2F;*.cu) add_library(myplugins SHARED ${PLUGIN_SRCS}) target_link_libraries(myplugins nvinfer cudart) find_package(OpenCV) include_directories(${OpenCV_INCLUDE_DIRS}) add_executable(yolov5_det yolov5_det.cpp ${SRCS}) target_link_libraries(yolov5_det nvinfer) target_link_libraries(yolov5_det cudart) target_link_libraries(yolov5_det myplugins) target_link_libraries(yolov5_det ${OpenCV_LIBS}) add_executable(yolov5_cls yolov5_cls.cpp ${SRCS}) target_link_libraries(yolov5_cls nvinfer) target_link_libraries(yolov5_cls cudart) target_link_libraries(yolov5_cls myplugins) target_link_libraries(yolov5_cls ${OpenCV_LIBS}) add_executable(yolov5_seg yolov5_seg.cpp ${SRCS}) target_link_libraries(yolov5_seg nvinfer) target_link_libraries(yolov5_seg cudart) target_link_libraries(yolov5_seg myplugins) target_link_libraries(yolov5_seg ${OpenCV_LIBS}) 这是cmakeLists.txt文件 cmake .. 报错： zgh@zgh-Legion-Y7000P-IAH7:~&#x2F;tensorrtx&#x2F;yolov5&#x2F;build$ cmake .. CMake Error at &#x2F;usr&#x2F;local&#x2F;share&#x2F;cmake-3.27&#x2F;Modules&#x2F;CMakeDetermineCUDACompiler.cmake:277 (message):  CMAKE_CUDA_ARCHITECTURES must be non-empty if set. Call Stack (most recent call first):  CMakeLists.txt:13 (enable_language)  – Configuring incomplete, errors occurred!</p>
<p>2024&#x2F;1&#x2F;20 11:33:33</p>
<p>该错误提示是由于没有指定 <code>CMAKE_CUDA_ARCHITECTURES</code> 变量，需要在 <code>CMakeLists.txt</code> 中添加以下语句：</p>
<div class="language-txt"><button title="Copy code" class="copy"></button><span class="lang">txt</span><pre class="shiki material-theme-palenight" style="background-color: #1a1a1a" tabindex="0"><code><span class="line"><span style="color: #babed8"></span></span>
<span class="line"><span style="color: #babed8">set(CMAKE_CUDA_ARCHITECTURES &quot;60;61;70;75&quot;)</span></span></code></pre></div><p>其中，<code>CMAKE_CUDA_ARCHITECTURES</code> 指定了支持的 CUDA 架构版本号，这里的值可以根据你的 GPU 型号进行调整。</p>
<p>在添加上述语句后，再次运行 <code>cmake ..</code> 命令即可。</p>
<div class="language-txt"><button title="Copy code" class="copy"></button><span class="lang">txt</span><pre class="shiki material-theme-palenight" style="background-color: #1a1a1a" tabindex="0"><code><span class="line"><span style="color: #babed8">cmake_minimum_required(VERSION 3.5)</span></span>
<span class="line"><span style="color: #babed8">project(Ball_Det)</span></span>
<span class="line"><span style="color: #babed8">set(CMAKE_CXX_STANDARD 11)</span></span>
<span class="line"><span style="color: #babed8">set(Cudart_LIBS &quot;/usr/local/cuda-12.2/targets/x86_64-linux/lib/libcudart.so&quot;)</span></span>
<span class="line"><span style="color: #babed8">set(CMAKE_CUDA_COMPILER /usr/local/cuda-12.2/bin/nvcc)</span></span>
<span class="line"><span style="color: #babed8">set(CMAKE_CUDA_ARCHITECTURES &quot;80&quot;)</span></span>
<span class="line"><span style="color: #babed8">include_directories(/usr/local/cuda-12.2/include)</span></span>
<span class="line"><span style="color: #babed8">link_directories(/usr/local/cuda-12.2/lib64)</span></span>
<span class="line"><span style="color: #babed8">enable_language(CUDA)</span></span>
<span class="line"><span style="color: #babed8">find_package(CUDA REQUIRED)</span></span>
<span class="line"><span style="color: #babed8">find_package(k4a REQUIRED)</span></span>
<span class="line"><span style="color: #babed8">find_package(OpenCV REQUIRED)</span></span>
<span class="line"><span style="color: #babed8">include_directories(</span></span>
<span class="line"><span style="color: #babed8">       Yolo</span></span>
<span class="line"><span style="color: #babed8">        $&#123;OpenCV_INCLUDE_DIRS&#125;</span></span>
<span class="line"><span style="color: #babed8">       /usr/local/cuda12.2/include</span></span>
<span class="line"><span style="color: #babed8">       $&#123;CMAKE_CURRENT_LIST_DIR&#125;</span></span>
<span class="line"><span style="color: #babed8">)</span></span>
<span class="line"><span style="color: #babed8">add_library(</span></span>
<span class="line"><span style="color: #babed8">       Yolo</span></span>
<span class="line"><span style="color: #babed8">       Yolo/yolov5.cpp</span></span>
<span class="line"><span style="color: #babed8">)</span></span>
<span class="line"><span style="color: #babed8"></span></span>
<span class="line"><span style="color: #babed8">cuda_add_library(myplugins SHARED ./Yolo/yololayer.cu)</span></span>
<span class="line"><span style="color: #babed8"></span></span>
<span class="line"><span style="color: #babed8"></span></span>
<span class="line"><span style="color: #babed8">add_executable(Ball_Det</span></span>
<span class="line"><span style="color: #babed8">       Mask_Detection.cpp</span></span>
<span class="line"><span style="color: #babed8">       Yolo/yolov5.cpp</span></span>
<span class="line"><span style="color: #babed8">       main.cpp</span></span>
<span class="line"><span style="color: #babed8">       Ball_Detection.cpp</span></span>
<span class="line"><span style="color: #babed8">       Yolo/calibrator.cpp</span></span>
<span class="line"><span style="color: #babed8">)</span></span>
<span class="line"><span style="color: #babed8">target_link_libraries(</span></span>
<span class="line"><span style="color: #babed8">       Ball_Det</span></span>
<span class="line"><span style="color: #babed8">       nvinfer</span></span>
<span class="line"><span style="color: #babed8">       cudart</span></span>
<span class="line"><span style="color: #babed8">       myplugins</span></span>
<span class="line"><span style="color: #babed8">       /usr/local/cuda12.2/lib64</span></span>
<span class="line"><span style="color: #babed8">       $&#123;Cudart_LIBS&#125;</span></span>
<span class="line"><span style="color: #babed8">       $&#123;OpenCV_LIBS&#125;</span></span>
<span class="line"><span style="color: #babed8">       libk4a.so</span></span>
<span class="line"><span style="color: #babed8">        )</span></span></code></pre></div>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://zgh20060114.github.io/post/yolov5.html" data-id="clxbjvuxs000k61cxc1cqaa16" data-title="yolov5" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/yolo/" rel="tag">yolo</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-deeplearning" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/post/deeplearning.html" class="article-date">
  <time class="dt-published" datetime="2023-12-16T02:57:26.000Z" itemprop="datePublished">2023-12-16</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/post/deeplearning.html">deeplearning</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>在 Pandas 中，<code>.apply()</code> 是用于对 DataFrame 或 Series 中的元素应用指定函数的方法。</p>
<p>对于 DataFrame，<code>.apply()</code> 可以在行或列方向上应用函数。语法如下：</p>
<div class="language-txt"><button title="Copy code" class="copy"></button><span class="lang">txt</span><pre class="shiki material-theme-palenight" style="background-color: #1a1a1a" tabindex="0"><code><span class="line"><span style="color: #babed8">DataFrame.apply(func, axis=0)</span></span></code></pre></div><ul>
<li><code>func</code> 是要应用的函数，可以是一个已定义的函数，也可以是一个匿名函数（如 lambda 函数）。</li>
<li><code>axis</code> 是指定应用函数的方向，默认为 0，表示按列应用函数；设置为 1 则表示按行应用函数。</li>
</ul>
<p>对于 Series，<code>.apply()</code> 仅能在元素级别上应用函数，无需指定应用方向。语法如下：</p>
<div class="language-txt"><button title="Copy code" class="copy"></button><span class="lang">txt</span><pre class="shiki material-theme-palenight" style="background-color: #1a1a1a" tabindex="0"><code><span class="line"><span style="color: #babed8">Series.apply(func)</span></span></code></pre></div><ul>
<li><code>func</code> 是要应用的函数，可以是一个已定义的函数，也可以是一个匿名函数（如 lambda 函数）。</li>
</ul>
<p>在上述代码中，<code>.apply(lambda x: (x - x.mean()) / (x.std()))</code> 就是将匿名函数 <code>lambda x: (x - x.mean()) / (x.std())</code> 应用到 DataFrame 或 Series 中的每个元素上。结果是对 DataFrame 或 Series 中的每个元素进行标准化计算，并返回处理后的结果</p>
<p><img src="/../images/image-20231218090813900.png" alt="image-20231218090813900"></p>
<p>​                                                                                                         右–按照时间线展开图</p>
<p><img src="/../images/image-20231218141358079.png" alt="image-20231218141358079"></p>
<h4 id="查询（自主提示）和键（非自主提示）之间的交互形成了注意力汇聚；注意力汇聚有选择地聚合了值（感官输入）以生成最终的输出。"><a href="#查询（自主提示）和键（非自主提示）之间的交互形成了注意力汇聚；注意力汇聚有选择地聚合了值（感官输入）以生成最终的输出。" class="headerlink" title="查询（自主提示）和键（非自主提示）之间的交互形成了注意力汇聚；注意力汇聚有选择地聚合了值（感官输入）以生成最终的输出。"></a>查询（自主提示）和键（非自主提示）之间的交互形成了注意力汇聚；注意力汇聚有选择地聚合了值（感官输入）以生成最终的输出。</h4><p><code>torch.repeat_interleave()</code> 函数是 PyTorch 中的一个张量操作函数，用于生成一个重复值的张量。它的详细解释如下：</p>
<div class="language-txt"><button title="Copy code" class="copy"></button><span class="lang">txt</span><pre class="shiki material-theme-palenight" style="background-color: #1a1a1a" tabindex="0"><code><span class="line"><span style="color: #babed8"></span></span>
<span class="line"><span style="color: #babed8">torch.repeat_interleave(input, repeats, dim=None)</span></span></code></pre></div><p>参数说明：</p>
<ul>
<li><code>input</code>：输入张量。</li>
<li><code>repeats</code>：重复次数，可以是一个整数、一个一维张量或一个与 <code>input</code> 张量形状相匹配的张量。</li>
<li><code>dim</code>（可选）：指定重复操作的维度。</li>
</ul>
<p>函数功能：</p>
<ul>
<li><code>torch.repeat_interleave()</code> 函数将输入张量 <code>input</code> 按指定的重复次数 <code>repeats</code> 进行重复，并生成一个新的张量。</li>
</ul>
<div class="language-txt"><button title="Copy code" class="copy"></button><span class="lang">txt</span><pre class="shiki material-theme-palenight" style="background-color: #1a1a1a" tabindex="0"><code><span class="line"><span style="color: #babed8">https://zhuanlan.zhihu.com/p/659067322</span></span>
<span class="line"><span style="color: #babed8"></span></span>
<span class="line"><span style="color: #babed8">sk-QxaDRZHsiyhtTFpB3JXHMkQ5fiK0AnEQZgM27mbiEIaIkF0G</span></span></code></pre></div>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://zgh20060114.github.io/post/deeplearning.html" data-id="clxbjvuxr000e61cxa8ttcd11" data-title="deeplearning" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-Pytorch" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/post/Pytorch.html" class="article-date">
  <time class="dt-published" datetime="2023-12-15T14:50:19.000Z" itemprop="datePublished">2023-12-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/post/Pytorch.html">Pytorch</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>在 Python 中，lambda 是用来创建匿名函数的关键字。所谓匿名函数，即没有显式定义函数名的函数，通常用于需要临时定义简单函数的场景。</p>
<p>lambda 函数的语法如下：</p>
<div class="language-txt"><button title="Copy code" class="copy"></button><span class="lang">txt</span><pre class="shiki material-theme-palenight" style="background-color: #1a1a1a" tabindex="0"><code><span class="line"><span style="color: #babed8">lambda arguments: expression</span></span></code></pre></div><p>其中：</p>
<ul>
<li><code>arguments</code> 是函数的参数，可以有多个参数，用逗号隔开。</li>
<li><code>expression</code> 是函数的返回值计算表达式。</li>
</ul>
<p>lambda 函数通常用于需要一个函数，但是又不想正式定义一个函数的场景，比如作为其他函数的参数传递进去，或者在一些函数式编程的场景中使用。</p>
<p>params &#x3D; [W_xh, W_hh, b_h, W_hq, b_q]<br>for param in params:<br>        param.requires_grad_(True)</p>
<p>目的是告诉 PyTorch 在模型训练过程中需要计算这些参数的梯度，并且在反向传播时对其进行更新。</p>
<p><code>Xt*Wxh + Ht−1*Whh=cat(Xt,Ht−1)*cat(Wxh,Whh)</code></p>
<p><code>torch.matmul(X, W_xh) + torch.matmul(H, W_hh)</code></p>
<p><code>torch.matmul(torch.cat((X, H), 1), torch.cat((W_xh, W_hh), 0))</code></p>
<p>当一个类实现了 <code>__call__</code> 方法时，它的实例对象可以像函数一样进行调用。这意味着你可以使用实例对象作为函数来调用，就好像调用一个函数一样。</p>
<p>例如，假设有一个类 <code>MyClass</code>，并且实现了 <code>__call__</code> 方法：</p>
<div class="language-txt"><button title="Copy code" class="copy"></button><span class="lang">txt</span><pre class="shiki material-theme-palenight" style="background-color: #1a1a1a" tabindex="0"><code><span class="line"><span style="color: #babed8">python</span></span>
<span class="line"><span style="color: #babed8">class MyClass:</span></span>
<span class="line"><span style="color: #babed8">    def __call__(self, x):</span></span>
<span class="line"><span style="color: #babed8">        print(&quot;Calling MyClass with argument:&quot;, x)</span></span></code></pre></div><p>现在，你可以创建一个 <code>MyClass</code> 的实例，并将其作为函数进行调用：</p>
<div class="language-txt"><button title="Copy code" class="copy"></button><span class="lang">txt</span><pre class="shiki material-theme-palenight" style="background-color: #1a1a1a" tabindex="0"><code><span class="line"><span style="color: #babed8">python</span></span>
<span class="line"><span style="color: #babed8">obj = MyClass()</span></span>
<span class="line"><span style="color: #babed8">obj(10)</span></span></code></pre></div><p>输出结果将是：</p>
<div class="language-txt"><button title="Copy code" class="copy"></button><span class="lang">txt</span><pre class="shiki material-theme-palenight" style="background-color: #1a1a1a" tabindex="0"><code><span class="line"><span style="color: #babed8"></span></span>
<span class="line"><span style="color: #babed8">Calling MyClass with argument: 10</span></span></code></pre></div><p>所以<br><code>class RNNModelScratch: #@save</code><br><code>&quot;&quot;&quot;从零开始实现的循环神经网络模型&quot;&quot;&quot;</code><br><code>def __init__(self, vocab_size, num_hiddens, device,</code><br><code>get_params, init_state, forward_fn):</code><br><code>self.vocab_size, self.num_hiddens = vocab_size, num_hiddens</code><br><code>self.params = get_params(vocab_size, num_hiddens, device)</code><br><code>self.init_state, self.forward_fn = init_state, forward_fn</code><br><code>def __call__(self, X, state):</code><br><code>X = F.one_hot(X.T, self.vocab_size).type(torch.float32)</code><br><code>return self.forward_fn(X, state, self.params)</code></p>
<p>可以这样调用：</p>
<p><code>net = RNNModelScratch(len(vocab), num_hiddens, d2l.try_gpu(), get_params,</code><br><code>init_rnn_state, rnn)</code></p>
<p><code>Y, new_state = net(X.to(d2l.try_gpu()), state)</code></p>
<p><code>**kwargs</code> 是 Python 中的一种特殊语法，用于接收任意数量的关键字参数（keyword arguments）。在函数或方法的定义中，<code>**kwargs</code> 会将传递给函数的未命名关键字参数收集到一个字典中，其中字典的键是参数名，值是参数值。</p>
<p>在这段代码中，<code>**kwargs</code> 被用作 <code>NWKernelRegression</code> 类的初始化方法 <code>__init__</code> 的参数。通过使用 <code>**kwargs</code>，可以接收任意数量的关键字参数，并将它们存储为类的属性。这样做可以使代码更加灵活，允许用户在创建 <code>NWKernelRegression</code> 实例时传递额外的参数。</p>
<p>例如，如果你创建了一个 <code>NWKernelRegression</code> 实例时传递了额外的参数，比如 <code>model = NWKernelRegression(param1=10, param2=&#39;abc&#39;)</code>，那么这些额外的参数会被收集到 <code>kwargs</code> 字典中，字典的键是参数名，值是参数值。你可以根据需要在 <code>__init__</code> 方法中使用这些参数。</p>
<p>总而言之，<code>**kwargs</code> 允许在函数或方法定义中接收任意数量的关键字参数，并将它们保存为字典以供后续使用。</p>
<p>在 PyTorch 中，<code>self.fc1=nn.Linear(16*5*5,120)</code> 定义了一个全连接层（或称为线性层）。具体来说：</p>
<ul>
<li><code>16*5*5</code> 是输入特征的数量，即展平后的张量长度。</li>
<li><code>120</code> 是全连接层输出的特征数量。</li>
</ul>
<p>这个全连接层会将形状为 400400 的输入（展平后的张量）转换为形状为 120120 的输出。这个层的作用是通过一个权重矩阵和偏置向量对输入进行线性变换，以得到最终的输出。</p>
<p>是如何展平的?</p>
<p>展平（Flatten）是将多维张量转换为一维向量的过程。以一个形状为 (16 \times 5 \times 5) 的张量为例，这个过程如下：</p>
<ol>
<li><p><strong>输入张量</strong>：假设有一个张量，其形状为 (16 \times 5 \times 5)，其中 (16) 是通道数，(5) 和 (5) 是每个通道的高和宽。</p>
</li>
<li><p><strong>展平过程</strong>：</p>
<ul>
<li>按照通道、行和列的顺序，将所有元素排列成一个一维向量。</li>
<li>例如，假设张量的元素是 ( \text{A}_{i,j,k} )，展平后你将得到一个长度为 (16 \times 5 \times 5 &#x3D; 400) 的一维向量。</li>
</ul>
</li>
<li><p><strong>展平后的结果</strong>：</p>
<ul>
<li>这个一维向量的长度为 (400)，即将原张量的所有数据连续地排列在一起。</li>
</ul>
</li>
</ol>
<p>在实际代码中，比如在 PyTorch 中，展平通常通过 <code>nn.Flatten()</code> 或者在前向传播方法中使用 <code>torch.flatten()</code> 来完成。</p>
<p>轴心时代</p>
<p>在优化算法中，<code>momentum</code> 是一个技术，用于加速收敛并减少震荡。具体来说：</p>
<ul>
<li><strong><code>momentum</code></strong>: 是一个动量因子，它在更新参数时考虑了之前梯度的影响。它通过引入过去梯度的加权平均来调整当前的梯度更新。</li>
<li><strong>作用</strong>: 它帮助优化过程在高曲率方向上加速，在低曲率方向上减缓，从而使优化过程更稳定，减少了震荡和加速收敛。</li>
</ul>
<p>在 <code>optim.SGD</code> 中，<code>momentum=0.9</code> 表示将前一步梯度的 90% 加入到当前梯度更新中。</p>
<p>ubuntu20.04可以装ROS 2 humble</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zgh20060114.github.io/post/Pytorch.html" data-id="clxbjvuxq000d61cx2owx79hb" data-title="Pytorch" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-hello-world" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/post/hello-world.html" class="article-date">
  <time class="dt-published" datetime="2023-12-15T14:27:11.801Z" itemprop="datePublished">2023-12-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/post/hello-world.html">Hello World</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><div class="language-bash"><button title="Copy code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight" style="background-color: #1a1a1a" tabindex="0"><code><span class="line"><span style="color: #FFCB6B">$</span><span style="color: #BABED8"> </span><span style="color: #C3E88D">hexo</span><span style="color: #BABED8"> </span><span style="color: #C3E88D">new</span><span style="color: #BABED8"> </span><span style="color: #89DDFF">&quot;</span><span style="color: #C3E88D">My New Post</span><span style="color: #89DDFF">&quot;</span></span></code></pre></div><p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><div class="language-bash"><button title="Copy code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight" style="background-color: #1a1a1a" tabindex="0"><code><span class="line"><span style="color: #FFCB6B">$</span><span style="color: #BABED8"> </span><span style="color: #C3E88D">hexo</span><span style="color: #BABED8"> </span><span style="color: #C3E88D">server</span></span></code></pre></div><p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><div class="language-bash"><button title="Copy code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight" style="background-color: #1a1a1a" tabindex="0"><code><span class="line"><span style="color: #FFCB6B">$</span><span style="color: #BABED8"> </span><span style="color: #C3E88D">hexo</span><span style="color: #BABED8"> </span><span style="color: #C3E88D">generate</span></span></code></pre></div><p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><div class="language-bash"><button title="Copy code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight" style="background-color: #1a1a1a" tabindex="0"><code><span class="line"><span style="color: #FFCB6B">$</span><span style="color: #BABED8"> </span><span style="color: #C3E88D">hexo</span><span style="color: #BABED8"> </span><span style="color: #C3E88D">deploy</span></span></code></pre></div><p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zgh20060114.github.io/post/hello-world.html" data-id="clxbjvuxr000g61cx3hlk42el" data-title="Hello World" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/2/">&laquo; Prev</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Embedded/" rel="tag">Embedded</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/esp32/" rel="tag">esp32</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/robot-kinematics/" rel="tag">robot_kinematics</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/yolo/" rel="tag">yolo</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Embedded/" style="font-size: 10px;">Embedded</a> <a href="/tags/esp32/" style="font-size: 10px;">esp32</a> <a href="/tags/robot-kinematics/" style="font-size: 10px;">robot_kinematics</a> <a href="/tags/yolo/" style="font-size: 10px;">yolo</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/10/">October 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/09/">September 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/08/">August 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/06/">June 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/05/">May 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/04/">April 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/01/">January 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/12/">December 2023</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/post/kinematics.html">kinematics</a>
          </li>
        
          <li>
            <a href="/post/Webots.html">Webots</a>
          </li>
        
          <li>
            <a href="/post/ubuntu-nvidia.html">ubuntu-nvidia</a>
          </li>
        
          <li>
            <a href="/post/ROS.html">ROS</a>
          </li>
        
          <li>
            <a href="/post/ODriver.html">ODriver</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2024 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>